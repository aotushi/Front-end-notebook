<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM介绍 | 前端知识总结</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="前端知识总结">
    
    <link rel="preload" href="/Front-end-notebook/assets/css/0.styles.83e8141f.css" as="style"><link rel="preload" href="/Front-end-notebook/assets/js/app.e3585100.js" as="script"><link rel="preload" href="/Front-end-notebook/assets/js/2.85246d92.js" as="script"><link rel="preload" href="/Front-end-notebook/assets/js/10.f1b216f5.js" as="script"><link rel="prefetch" href="/Front-end-notebook/assets/js/11.6de65720.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/12.cdb850e5.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/13.36a9c180.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/14.abcc488e.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/15.cb831a44.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/3.b385b0e6.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/4.eb76b8ba.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/5.f064699d.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/6.258c7694.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/7.1c7fcd90.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/8.5cef7ecb.js"><link rel="prefetch" href="/Front-end-notebook/assets/js/9.7a0b5ceb.js">
    <link rel="stylesheet" href="/Front-end-notebook/assets/css/0.styles.83e8141f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Front-end-notebook/" class="home-link router-link-active"><!----> <span class="site-name">前端知识总结</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Front-end-notebook/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识点博客" class="dropdown-title"><span class="title">前端知识点博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识点博客" class="mobile-dropdown-title"><span class="title">前端知识点博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/aotushi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Front-end-notebook/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识点博客" class="dropdown-title"><span class="title">前端知识点博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识点博客" class="mobile-dropdown-title"><span class="title">前端知识点博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/aotushi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/Front-end-notebook/handbook/desc" class="sidebar-heading clickable"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Front-end-notebook/handbook/desc.html" class="sidebar-link">博客搭建</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Front-end-notebook/handbook/01_html&amp;css" class="sidebar-heading clickable"><span>HTML&amp;CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Front-end-notebook/handbook/02_JavaScript基础" class="sidebar-heading clickable open"><span>JavaScript</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Front-end-notebook/handbook/02_JavaScript基础.html" class="sidebar-link">JavaScript基础</a></li><li><a href="/Front-end-notebook/handbook/03_JavaScript-DOM.html" aria-current="page" class="active sidebar-link">JavaScript-DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-notebook/handbook/03_JavaScript-DOM.html#事件-事件流" class="sidebar-link">事件/事件流</a></li><li class="sidebar-sub-header"><a href="/Front-end-notebook/handbook/03_JavaScript-DOM.html#ui事件" class="sidebar-link">UI事件</a></li><li class="sidebar-sub-header"><a href="/Front-end-notebook/handbook/03_JavaScript-DOM.html#节点" class="sidebar-link">节点</a></li><li class="sidebar-sub-header"><a href="/Front-end-notebook/handbook/03_JavaScript-DOM.html#元素的大小和滚动" class="sidebar-link">元素的大小和滚动</a></li><li class="sidebar-sub-header"><a href="/Front-end-notebook/handbook/03_JavaScript-DOM.html#dom案例及功能" class="sidebar-link">DOM案例及功能</a></li></ul></li><li><a href="/Front-end-notebook/handbook/04_JavaScript-高级.html" class="sidebar-link">JavaScript-高级</a></li><li><a href="/Front-end-notebook/handbook/05_JavaScript-BOM.html" class="sidebar-link">JavaScript-BOM</a></li><li><a href="/Front-end-notebook/handbook/06_jQuery.html" class="sidebar-link">JQuery</a></li><li><a href="/Front-end-notebook/handbook/07_JavaScript-ES6.html" class="sidebar-link">JavaScript-ES6</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="dom介绍"><a href="#dom介绍" class="header-anchor">#</a> DOM介绍</h3> <div class="language-html extra-class"><pre class="language-html"><code>- DOM就是文档对象模型
- DOM描述了处理网页内容的方法和接口
- window是浏览器窗口对象,所有东西都被当做是window的子对象
- 文档对象document是window下的一个属性,代表整个DOM文档对象
- 文档树(dom树) 以HTML为根节点,形成的一颗道理的树状结构.这个树上所有的东西叫做节点.一共有12种节点类型,常用的是4种.
 - 节点分类:
 		元素节点 元素/标签
		属性节点 属性
        文本节点 文本
        注释节点 注释
 - 这些节点我们通过DOM方法去获取或者操作使用,就称作DOM对象       
        

</code></pre></div><p>对DOM的所有操作都是以==document==对象开始.它是DOM的主'入口点',从它我们可以访问任何节点.</p> <p>最顶层的树节点可以直接作为document的属性来使用:</p> <p>&lt;html&gt; = document.documentElement</p> <p>&lt;body&gt; = document.body</p> <p>&lt;body&gt; = document.head</p> <p><strong>可能的问题</strong></p> <p>document.body的值可能是null</p> <p>脚本无法访问在运行时不存在的元素.尤其是如果一个脚本在head标签中,那么脚本是无法访问到document.body的,因为浏览器没有读到它.</p> <h3 id="window-onload事件"><a href="#window-onload事件" class="header-anchor">#</a> window.onload事件</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token operator">-</span> 等待页面资源加载完成事件
<span class="token operator">-</span> 一般情况下我们都是等待页面加载完成后才去操作<span class="token constant">DOM</span>元素<span class="token punctuation">.</span>如果页面没有加载完成就去获取<span class="token constant">DOM</span>元素<span class="token punctuation">,</span>有可能获取不到<span class="token punctuation">.</span>
<span class="token operator">-</span> 页面加载完成事件 加载完所有外部资源
<span class="token operator">-</span> 当页面加载完成后 window<span class="token punctuation">.</span>onload的回调函数 会自动执行

<span class="token operator">-</span> 回调函数
	<span class="token operator">-</span> 你定义 没调用 自动执行
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">var</span> pNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div><h3 id="事件的3大要素"><a href="#事件的3大要素" class="header-anchor">#</a> 事件的3大要素</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>事件的<span class="token number">3</span>大要素<span class="token operator">:</span>
事件的承受方 为事件源
事件的类型<span class="token operator">:</span> 单击 移入 移出 移动 键盘 获得焦点 失去焦点
事件源承受事件后 给出的反馈<span class="token operator">:</span>回调函数<span class="token comment">//事件源.事件名称 = 回调函数</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//获取页面元素（事件源）</span>
        <span class="token comment">//通过id值来访问页面元素  返回的结果是一个对象 我们称之为dom对象</span>
        <span class="token keyword">var</span> btnNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    
		<span class="token comment">//事件源.事件名称 = 回调函数</span>
        btnNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            num<span class="token operator">++</span><span class="token punctuation">;</span> 
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><h3 id="操作元素通用属性"><a href="#操作元素通用属性" class="header-anchor">#</a> 操作元素通用属性</h3> <h4 id="_1-获取dom对象"><a href="#_1-获取dom对象" class="header-anchor">#</a> 1.获取DOM对象</h4> <h5 id="_1-1-通过dom元素的id名称或name值"><a href="#_1-1-通过dom元素的id名称或name值" class="header-anchor">#</a> 1.1 通过dom元素的id名称或name值</h5> <p>HTML5<a href="http://www.whatwg.org/specs/web-apps/current-work/" target="_blank" rel="noopener noreferrer">规范文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中指出:如果一个元素符合下面两条规则中的任一条,则window对象中必须要有与之对应的一个属性,属性值就是这个对象.</p> <ul><li>如果一个元素拥有ID属性,那么ID属性的属性值就会成为window对象的属性名.</li> <li>如果一个元素拥有name属性,那么name属性的属性值就会成为window对象的属性名.但这个元素的标签名必须是: a, applet, area, embed, form, frame, frameset, iframe, img, object,其中的一个.</li> <li>使用范围及使用建议: <strong>Firefox、Chrome、IE 9-11都支持，没有形成标准，而且容易污染全局，造成各种冲突和错误，不推荐使用。</strong></li></ul> <h5 id="_1-2-通过document"><a href="#_1-2-通过document" class="header-anchor">#</a> 1.2 通过document</h5> <h4 id="_2-添加本身具有的属性-对象-属性-对象-属性"><a href="#_2-添加本身具有的属性-对象-属性-对象-属性" class="header-anchor">#</a> 2.添加本身具有的属性(对象.属性, 对象[属性])</h4> <div class="language-html extra-class"><pre class="language-html"><code>- 通过id值获取元素的DOM对象(事件源)
document.getElementById('idname')

- 通过DOM对象为元素添加属性(天生固有属性)
1.dom对象.属性
2.dom对象[属性]

<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">'</span>en<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>utf-8<span class="token punctuation">'</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">img</span><span class="token punctuation">{</span><span class="token property">width</span><span class="token punctuation">:</span>150px<span class="token punctuation">;</span><span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.baidu.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>aNode</span><span class="token punctuation">&gt;</span></span>百度一下<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>1.jpg<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>imgNode</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//通过id获取元素的dom对象</span>
            <span class="token keyword">var</span> aNode<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'aNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> btnNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> imgNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'imgNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//给按钮绑定事件</span>
            btnNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//操作a标签的href属性  获取的标签是dom对象,标签属性相当于对象的属性</span>
                aNode<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'https://jd.com'</span><span class="token punctuation">;</span>
               <span class="token comment">//aNode['href'] = 'https://jd.com';</span>
                imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'2.jpg'</span><span class="token punctuation">;</span>
                imgNode<span class="token punctuation">[</span>src<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'2.jpg'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="实例-图片来回切换-2种方法"><a href="#实例-图片来回切换-2种方法" class="header-anchor">#</a> 实例: 图片来回切换(2种方法)</h3> <div class="language-html extra-class"><pre class="language-html"><code>- 使用DOM实现图片来回切换
 - 标准位
 - 变量取模

- 方法1:标准位

- 使用(标志位), 使得图片可以通过点击button来回切换
- 在没有语义的情况下不会过度关注标志位变量的默认值,而是区分好标志位不同状态对应的逻辑

代码更新:
 var flag = true;// true代表图片1,false代表图片2
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
btnNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
        imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'2.jpg'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'1.jpg'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    flag <span class="token operator">=</span> <span class="token operator">!</span>flag<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


- 方法2:  定义一个变量 使用取模换算
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
btnNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    num<span class="token operator">++</span><span class="token punctuation">;</span>
    imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> num<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">;</span> <span class="token comment">//3张图片就除以3取模</span>
<span class="token punctuation">}</span>    
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="操作元素特殊属性"><a href="#操作元素特殊属性" class="header-anchor">#</a> 操作元素特殊属性</h3> <blockquote><p>案例:点击按钮修改多选框 选中</p></blockquote> <h4 id="案例-input表单输入之复选框"><a href="#案例-input表单输入之复选框" class="header-anchor">#</a> 案例:input表单输入之复选框</h4> <div class="language-html extra-class"><pre class="language-html"><code>- 案例,点击按钮,使input多选框来回切换

- 方法1:使用标准位
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>checkbox<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>checkNode<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>btn<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>   
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> btnNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> checkNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'checkNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//标志位</span>
        
       btnNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
            	checkNode<span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            	checkNode<span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        	<span class="token punctuation">}</span>
        	flag <span class="token operator">=</span> <span class="token operator">!</span>flag<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>   
 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>    

- 方法2: 
更新: 只要遇到属性名和属性值都相同的属性,我们统一转换成布尔值操作

btnNode.onclick = function(){
	checkNode.checked = !checkNode. v;
}
</code></pre></div><h4 id="切换类名"><a href="#切换类名" class="header-anchor">#</a> 切换类名</h4> <div class="language-html extra-class"><pre class="language-html"><code>- 类名使用className代替class,class在JS中是保留字

</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.p1</span><span class="token punctuation">{</span><span class="token property">backgorund</span><span class="token punctuation">:</span>pink<span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token selector">.p2</span><span class="token punctuation">{</span><span class="token property">background</span><span class="token punctuation">:</span>yellowgreen<span class="token punctuation">;</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>pNode<span class="token punctuation">'</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>第一个p标签<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> pNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//alert(1); 测试dom方式,如果能运行,证明到这一步是对的</span>
            <span class="token comment">//通过更换类名来实现p标签背景颜色改变</span>
            <span class="token comment">//pNode.class = 'p2'; 错误,class为js保留字 在es6当中成为了 类的关键字,所以我们不能通过访问class这个属性 来操作元素的类名.我们需要使用 className</span>
            pNode<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'p2'</span><span class="token punctuation">;</span>
            <span class="token comment">//或者 pNode['classNmae'] = 'p2';</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="操作元素自定义属性"><a href="#操作元素自定义属性" class="header-anchor">#</a> 操作元素自定义属性</h3> <h4 id="setattribute-属性名-属性值"><a href="#setattribute-属性名-属性值" class="header-anchor">#</a> setAttribute(属性名,属性值)</h4> <h4 id="getattribute-属性名"><a href="#getattribute-属性名" class="header-anchor">#</a> getAttribute(属性名)</h4> <div class="language-Markdown extra-class"><pre class="language-markdown"><code><span class="token list punctuation">-</span> 根据属性是否天生就存在元素身上的额情况,我们可以将属性分为1.固有属性(天生属性), 2.自定义属性(自己随便添加).

<span class="token list punctuation">-</span> 对于固有属性,可以通过 对象.属性名和对象['属性名']来获取或设置

<span class="token list punctuation">-</span> 对于自定义属性,无法使用以上两种方法,只通过两个固定方法来操作:
 <span class="token list punctuation">-</span> setAttribute 设置自定义属性 两个参数 参数1,要设置的属性名称; 参数2,要设置的属性值
 <span class="token list punctuation">-</span> getAttribute 获取自定义属性 一个参数:要读取的属性名称 返回对应的属性值 返回结果为字符串
 
 <span class="token list punctuation">-</span> 固有属性可以通过自定义属性的2个方法来操作,但一般还是按照对象.属性名和对象['属性名']的方式
 <span class="token list punctuation">-</span> 使用setAttribute和getAttribute操作class类名,直接使用class来获取或设置.不使用className.
 


</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    &lt;p id=<span class="token string">'pNode'</span> class=<span class="token string">'p1'</span> aa=<span class="token string">'bb'</span>&gt;这是一个p标签&lt;/p&gt;
    &lt;button id=<span class="token string">&quot;btn&quot;</span>&gt;按钮&lt;/button&gt;
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> pNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token string">'bb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="获取元素的其他方式"><a href="#获取元素的其他方式" class="header-anchor">#</a> 获取元素的其他方式</h3> <h4 id="document-getelementbyclassname-数组"><a href="#document-getelementbyclassname-数组" class="header-anchor">#</a> document.getElementByClassName 数组</h4> <h4 id="document-getelementbytagname-数组"><a href="#document-getelementbytagname-数组" class="header-anchor">#</a> document.getElementByTagName 数组</h4> <h4 id="document-queryselector-id-classname-返回单个dom对象"><a href="#document-queryselector-id-classname-返回单个dom对象" class="header-anchor">#</a> document.querySelector()  #id .className 返回单个DOM对象</h4> <h4 id="document-queryselectorall-id"><a href="#document-queryselectorall-id" class="header-anchor">#</a> document.querySelectorAll(#id)</h4> <p>返回与指定的选择器组匹配的文档中的元素列表 (使用深度优先的先序遍历文档的节点)。返回的对象是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/NodeList" target="_blank" rel="noopener noreferrer"><code>NodeList</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。</p> <p>NodeList:</p> <p><code>NodeList</code> 对象是节点的集合，通常是由属性，如<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/childNodes" target="_blank" rel="noopener noreferrer"><code>Node.childNodes</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 方法，如<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelectorAll" target="_blank" rel="noopener noreferrer"><code>document.querySelectorAll</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 返回的。</p> <p><code>NodeList</code> <strong>不是一个数组</strong>，是一个类似数组的对象(<em>Like Array Object</em>)。虽然 <code>NodeList</code> 不是一个数组，但是可以使用 <code>forEach()</code> 来迭代。你还可以使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener noreferrer"><code>Array.from()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 将其转换为数组。</p> <p>不过，有些浏览器较为过时，没有实现 <code>NodeList.forEach()</code> 和 <code>Array.from()</code>。你可以用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" target="_blank" rel="noopener noreferrer"><code>Array.prototype.forEach()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来规避这一问题。</p> <p><code>NodeList</code>是一个实时集合,如果文档中的节点书发生变化,<code>NodeList</code>也会随之变化. 例如<code>Node.childNodes</code>是实时的.其他情况下,NodeList是一个静态集合,也就是说随后对文档对象模型的任何改动都不会影响集合的内容. 例如document.querySelectorAll返回一个静态NodeList.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pItem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>11111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pItem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>22222<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pItem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>33333<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pItem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>44444<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pItem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>55555<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pItem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>66666<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>今天晚上吃点啥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 1. 通过id获取元素 </span>
        <span class="token keyword">var</span> p6Node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'p6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 2. 通过class获取元素 返回一个伪数组,内部包含的是含有这个class的元素集合(nodelist)</span>
        <span class="token comment">//当我们遇到元素集合时,如果想使用dom对象的方法或属性是不能直接使用的.</span>
        <span class="token comment">//需要通过 遍历 或 索引取值的方式访问内部的dom对象</span>
        <span class="token keyword">var</span> pItems <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementByClassName</span><span class="token punctuation">(</span><span class="token string">'pItem'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 3. 通过标签名称获取元素 返回一个伪数组对象,内部包含的是这个标签名称的 元素集合.</span>
        <span class="token comment">//当我们遇到元素集合时,如果想使用dom对象的方法或属性是不能直接使用的.</span>
        <span class="token comment">//需要通过 遍历 或 索引取值的方式访问内部的dom对象</span>
        <span class="token keyword">var</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//我们通过类名或标签名称去查找元素时(或者所有能获取集合的方式),无论查询结果是一个对象还是一个集合,都是以伪数组对象返回.</span>
        
        
        <span class="token comment">//推荐方式 querySelector querySelectorAll 直接使用选择器来查询元素</span>
        <span class="token comment">//querySelector 查找单个元素 返回结果 直接为dom对象 就算选择器的范围是一个集合,只返回第一个  ****</span>
        <span class="token comment">//querySelectorAll 用来查询元素集合 无论查询结果几个 都是将匹配的dom对象,放在伪数组中       ****</span>
        
        <span class="token keyword">var</span> pNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#p2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">var</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'#p2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        
        <span class="token comment">//可以将已获取的dom对象,再查询其内部的对象</span>
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> pTask <span class="token operator">=</span> boxNode<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>'p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="获取元素方式-总结"><a href="#获取元素方式-总结" class="header-anchor">#</a> 获取元素方式-总结</h4> <div class="language-HTML extra-class"><pre class="language-html"><code>querySelector()
querySelectorAll()
getElementsById()
getElementsByTagName()
getElementsByClassName()
getElementsByName()

</code></pre></div><h3 id="修改元素样式"><a href="#修改元素样式" class="header-anchor">#</a> 修改元素样式</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">-</span> 通过<span class="token constant">JS</span>修改的样式<span class="token punctuation">,</span>都为行内样式 <span class="token comment">//选择器权重高</span>
<span class="token operator">-</span> 设置样式会出现在行内<span class="token punctuation">,</span><span class="token function">读取样式也只能读取行内样式</span><span class="token punctuation">(</span>能读非行内样式<span class="token punctuation">,</span>但是需要加操作<span class="token punctuation">)</span>
<span class="token operator">-</span> css中所有原本样式名称上带有横杠的<span class="token punctuation">,</span>一律使用小驼峰命名法

<span class="token operator">-</span> 格式<span class="token operator">:</span>
 对象<span class="token punctuation">.</span>style<span class="token punctuation">.</span>属性 <span class="token operator">=</span> <span class="token string">'新值'</span><span class="token punctuation">;</span>
例<span class="token operator">:</span> 变量<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'新值'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="获取和修改元素内容-innerhtml-innertext"><a href="#获取和修改元素内容-innerhtml-innertext" class="header-anchor">#</a> 获取和修改元素内容 innerHTML/innerText</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//获取元素内容</span>
<span class="token operator">-</span> innerText 
	获取元素内容<span class="token punctuation">,</span>但只会获取文本<span class="token punctuation">,</span>不会获取内部标签
	设置元素内容<span class="token punctuation">,</span>如果文本中有标签<span class="token punctuation">,</span>会作为文本被渲染<span class="token punctuation">,</span>标签不会被解析
	

<span class="token operator">-</span> innerHTML
	获取元素内部 标签<span class="token operator">+</span>文本
	设置元素内容<span class="token punctuation">,</span>文本中的标签<span class="token punctuation">,</span>可以被渲染
	这也是我们向页面中添加元素的方法之一
	

<span class="token comment">//修改元素内容</span>
<span class="token operator">-</span> 当设置或读取的内容为纯文本<span class="token punctuation">,</span>两种方法没有区别

<span class="token operator">-</span> innerText
	获取或设置元素的内容  标签不会被渲染或者获取  所有浏览器都认识   只对可见元素有效
<span class="token operator">-</span> Node<span class="token punctuation">.</span>textContent
  Node 接口的 textContent 属性表示一个节点及其后代的文本内容<span class="token punctuation">;</span>返回值是一个字符串或<span class="token keyword">null</span><span class="token punctuation">.</span>
	获取或设置元素的内容  标签不会被渲染或者获取  高级浏览器都认识   对隐藏元素也有效 但依然不显示

以上两个属性指的对可见元素是否有效<span class="token punctuation">,</span><span class="token function">说的是占位隐藏</span><span class="token punctuation">(</span>display<span class="token operator">:</span>none<span class="token punctuation">;</span> visibility<span class="token operator">:</span>hidden<span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="createdocumentfragment"><a href="#createdocumentfragment" class="header-anchor">#</a> createDocumentFragment()</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//http://www.cnitblog.com/asfman/articles/32614.html</span>
<span class="token comment">//https://blog.csdn.net/qiao13633426513/article/details/80243058</span>

<span class="token number">1.</span><span class="token function">createdocumentfragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法创建了一虚拟的节点对象
<span class="token number">2.</span>DocumentFragment节点不属于文档树，继承的parentNode属性总是<span class="token keyword">null</span>。
<span class="token number">3.</span>当需要添加多个dom元素时，如果先将这些元素添加到DocumentFragment中，再统一将DocumentFragment添加到页面，会减少页面渲染dom的次数，效率会明显提升。
<span class="token number">4.</span>如果使用appendChid方法将原dom树中的节点添加到DocumentFragment中时，会删除原来的节点。 


</code></pre></div><h3 id="兼容性封装获取元素文本"><a href="#兼容性封装获取元素文本" class="header-anchor">#</a> 兼容性封装获取元素文本</h3> <div class="language-html extra-class"><pre class="language-html"><code>- 封装一个函数 既能获取元素的文本也能设置一个元素的文本
- 在设置和获取的时候  能够使用textContent的情况下 优先使用textContent  如果不能使用 再使用innerText


</code></pre></div><div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">&quot;pNode&quot;</span><span class="token operator">&gt;</span>今天晚上吃点啥<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>


window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> pNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> btnNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btnNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">setOrGetContent</span><span class="token punctuation">(</span>pNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setOrGetContent</span><span class="token punctuation">(</span>pNode<span class="token punctuation">,</span> <span class="token string">'今天吃火锅'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">function</span> <span class="token function">setOrGetContent</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> node<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> node<span class="token punctuation">.</span>innerText
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>arguments <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">{</span>
                node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> content<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                node<span class="token punctuation">.</span>innerText <span class="token operator">=</span> content<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="排它思想实现文本切换"><a href="#排它思想实现文本切换" class="header-anchor">#</a> 排它思想实现文本切换</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>哈哈哈1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>哈哈哈2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>哈哈哈3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>哈哈哈4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>哈哈哈5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>哈哈哈6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">var</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>pList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           pList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>pList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                   pList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'呵呵呵'</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
             	 <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'gegege'</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token comment">//this在事件回调当中,指向当前触发事件的事件源</span>
           <span class="token comment">//在使用排它思路,去处理如高亮切换等逻辑 一定是先操作集合后操作当前事件源</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span> 
    
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="this是什么"><a href="#this是什么" class="header-anchor">#</a> this是什么</h3> <div class="language-html extra-class"><pre class="language-html"><code>- 直接调用,this是window
- 以方法形式调用,this是调用方法的对象
- new调用,this是新建的对象
- 通过函数对象的call/apply/bind调用,this是第一个参数

- 回调函数形式
 - this指触发事件的事件源或window
 - vue控制的回调函数,this是组件的实例
 - react控制的生命周期回调,事件监听回调,this是组件对象/undefined

</code></pre></div><h2 id="事件-事件流"><a href="#事件-事件流" class="header-anchor">#</a> 事件/事件流</h2> <div class="language-js extra-class"><pre class="language-js"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>starof<span class="token operator">/</span>p<span class="token operator">/</span><span class="token number">4066381.</span>html
</code></pre></div><h3 id="一-事件"><a href="#一-事件" class="header-anchor">#</a> 一.事件</h3> <p><strong>事件是文档或者浏览器窗口中发生的，特定的交互瞬间。</strong></p> <p>事件是用户或浏览器自身执行的某种动作，如click,load和mouseover都是事件的名字。</p> <p>事件是javaScript和DOM之间交互的桥梁。</p> <h3 id="二-事件流"><a href="#二-事件流" class="header-anchor">#</a> 二.事件流</h3> <p><strong>事件流描述的是从页面中接收事件的顺序</strong></p> <h4 id="_1-事件流感性认知"><a href="#_1-事件流感性认知" class="header-anchor">#</a> 1.事件流感性认知</h4> <p>问题：单击页面元素，什么样的元素能感应到这样一个事件？</p> <p>答案：单击元素的同时，也单击了元素的容器元素，甚至整个页面。</p> <p>案例: <a href="https://www.cnblogs.com/starof/p/4066381.html" target="_blank" rel="noopener noreferrer">3个同心圆<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="_2-事件流"><a href="#_2-事件流" class="header-anchor">#</a> 2.事件流</h4> <h4 id="_2-1-两种事件流模型"><a href="#_2-1-两种事件流模型" class="header-anchor">#</a> 2.1 两种事件流模型</h4> <p>事件传播的顺序对应浏览器的两种事件流模型：捕获型事件流和冒泡型事件流</p> <p><strong>冒泡型事件流</strong>：事件的传播是从<strong>最特定</strong>的<strong>事件目标</strong>到最不特定的<strong>事件目标</strong>。即从DOM树的叶子到根。<strong>【推荐】</strong></p> <p><strong>捕获型事件流</strong>：事件的传播是从<strong>最不特定</strong>的<strong>事件目标</strong>到最特定的<strong>事件目标</strong>。即从DOM树的根到叶子。</p> <p>事件捕获的思想就是不太具体的节点应该更早接收到事件，而最具体的节点最后接收到事件</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Click me!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

上面这段html代码中，单击了页面中的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>元素，
在冒泡型事件流中click事件传播顺序为<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>—》<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>—》<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>—》document
在捕获型事件流中click事件传播顺序为document—》<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>—》<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>—》<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><table><thead><tr><th>冒泡型事件传播</th> <th>捕获型事件传播</th></tr></thead> <tbody><tr><td><img src="https://images0.cnblogs.com/blog/315302/201411/010945436598199.png" alt=""></td> <td><img src="https://images0.cnblogs.com/blog/315302/201411/010945579257474.png" alt=""></td></tr></tbody></table> <p>note:由于老版本浏览器不支持，很少有人使用事件捕获。<strong>建议使用事件冒泡</strong>。</p> <h4 id="_2-2-dom事件流"><a href="#_2-2-dom事件流" class="header-anchor">#</a> 2.2 DOM事件流</h4> <p>DOM标准采用捕获+冒泡。两种事件流都会触发DOM的所有对象，从document对象开始，也在document对象结束</p> <p><img src="https://images2015.cnblogs.com/blog/315302/201606/315302-20160621155328756-279009443.png" alt=""></p> <p>DOM标准规定事件流包括三个阶段：事件捕获阶段、处理目标阶段和事件冒泡阶段。</p> <ul><li>事件捕获阶段：<strong>实际目标</strong>（&lt;div&gt;）在捕获阶段<strong>不会接收事件</strong>。也就是在捕获阶段，事件从document到&lt;html&gt;再到&lt;body&gt;就停止了。上图中为1~3.</li> <li>处于目标阶段：事件在&lt;div&gt;上发生并处理。<strong>但是事件处理会被看成是冒泡阶段的一部分</strong>。</li> <li>冒泡阶段：事件又传播回文档。</li></ul> <p>note:</p> <ul><li><p>尽管“DOM2级事件”标准规范明确规定事件捕获阶段不会涉及事件目标，但是在IE9、Safari、Chrome、Firefox和Opera9.5及更高版本都会在捕获阶段触发事件对象上的事件。结果，就是有两次机会在目标对象上面操作事件。</p></li> <li><p>并非所有的事件都会经过冒泡阶段 。所有的事件都要经过捕获阶段和处于目标阶段，但是有些事件会跳过冒泡阶段：如，获得输入焦点的focus事件和失去输入焦点的blur事件。</p> <p>两次机会在目标对象上面操作事件例子:</p></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">#outer</span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">bottom</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#middle</span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span>300px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> -150px<span class="token punctuation">;</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> -150px<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#inner</span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> darkgreen<span class="token punctuation">;</span>
        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span>white<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#outer,#middle,#inner</span><span class="token punctuation">{</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>outer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>middle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            click me!
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> innerCircle<span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;inner&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    innerCircle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;innerCircle的click事件在捕获阶段被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    innerCircle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;innerCircle的click事件在冒泡阶段被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> middleCircle<span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;middle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    middleCircle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;middleCircle的click事件在捕获阶段被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    middleCircle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;middleCircle的click事件在冒泡阶段被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> outerCircle<span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;outer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    outerCircle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;outerCircle的click事件在捕获阶段被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    outerCircle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;outerCircle的click事件在冒泡阶段被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://images0.cnblogs.com/blog/315302/201411/052135036896502.png" alt=""></p> <h4 id="_3-事件流的典型应用-事件代理"><a href="#_3-事件流的典型应用-事件代理" class="header-anchor">#</a> 3.事件流的典型应用--事件代理</h4> <p>传统的事件处理中，需要为<strong>每个元素</strong>添加事件处理器。js事件代理则是一种简单有效的技巧，通过它可以把事件处理器添加到<strong>一个父级元素</strong>上，从而避免把事件处理器添加到<strong>多个子级元素</strong>上。</p> <h4 id="_3-1事件代理"><a href="#_3-1事件代理" class="header-anchor">#</a> 3.1事件代理</h4> <p>事件代理的原理用到的就是事件冒泡和目标元素，把事件处理器添加到父元素，等待子元素事件冒泡，并且父元素能够通过target（IE为srcElement）判断是哪个子元素，从而做相应处理.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>red<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>orange<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>yellow<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>green<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>blue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>indigo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>purple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> colorList<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;color-list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    colorList<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span>showColor<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">showColor</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        e<span class="token operator">=</span>e<span class="token operator">||</span>window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
        <span class="token keyword">var</span> targetElement<span class="token operator">=</span>e<span class="token punctuation">.</span>target<span class="token operator">||</span>e<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>targetElement<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>targetElement<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_3-2事件代理的好处"><a href="#_3-2事件代理的好处" class="header-anchor">#</a> 3.2事件代理的好处</h4> <ul><li>将多个事件处理器减少到一个，因为事件处理器要驻留内存，这样就提高了性能。</li> <li>DOM更新无需重新绑定事件处理器，因为事件代理对不同子元素可采用不同处理方法。如果新增其他子元素（a,span,div等），直接修改事件代理的事件处理函数即可，不需要重新绑定处理器，不需要再次循环遍历。</li></ul> <h4 id="_3-3事件代理的弊端"><a href="#_3-3事件代理的弊端" class="header-anchor">#</a> 3.3事件代理的弊端</h4> <p>代码如下：事件代理同时绑定了li和span，当点击span的时候，li和span都会冒泡</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>li中的span的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'li'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'li li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'li span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>解决方法:</p> <p>1.span的事件处理程序中阻止冒泡</p> <p>给子级加 event.stopPropagation( )</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'li span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>2.li的事件处理程序中检测target元素</p> <p>return false;</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'li'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeName <span class="token operator">==</span> <span class="token string">'SPAN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'li li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-4事件代理的有趣应用"><a href="#_3-4事件代理的有趣应用" class="header-anchor">#</a> 3.4事件代理的有趣应用</h4> <p>点击一个列表,输出对应的索引</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> ul<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> lis<span class="token operator">=</span>ul<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'ul li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> target<span class="token operator">=</span>e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">'LI'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>lis<span class="token punctuation">,</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="三-事件处理程序"><a href="#三-事件处理程序" class="header-anchor">#</a> 三.事件处理程序</h3> <p>事件是用户或浏览器自身执行的某种动作，如click,load和mouseover都是事件的名字。响应某个事件的函数就叫<strong>事件处理程序</strong>（也叫<strong>事件处理函数</strong>、<strong>事件句柄</strong>）。事件处理程序的名字以&quot;on&quot;开头，因此click事件的事件处理程序就是onclick,load事件的事件处理程序就是onload。</p> <p>为事件指定事件处理程序的方法主要有3种</p> <h4 id="_1-绑定事件的三种方式"><a href="#_1-绑定事件的三种方式" class="header-anchor">#</a> 1. 绑定事件的三种方式</h4> <h4 id="_1-1-html事件处理程序-dom0"><a href="#_1-1-html事件处理程序-dom0" class="header-anchor">#</a> 1.1 HTML事件处理程序(dom0)</h4> <p><strong>事件直接加在html元素上。</strong></p> <p>首先，这种方法已经过时了。因为动作(javascript代码)和内容(html代码)紧密耦合，修改时即要修改html也要修改js。但是写个小demo的时候还是可以使用的。此事件为<a href="https://baike.baidu.com/item/DOM/50288?fr=aladdin" target="_blank" rel="noopener noreferrer">DOM 0级标准<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。同时，这个事件的优先级是最高的。</p> <p>这种方式也有两种方法，都很简单：</p> <p>第一种：直接在html中定义事件处理程序及包含的动作</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>button<span class="token punctuation">'</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>click me<span class="token punctuation">'</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span></span><span class="token punctuation">'</span></span></span><span class="token attr-name">clicked')'</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>第二种：html中定义事件处理程序，执行的动作则调用其他地方定义的脚本</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>button<span class="token punctuation">'</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>click me<span class="token punctuation">'</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value javascript language-javascript"><span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">'</span></span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">function</span> <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'clicked'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>note:</p> <p>1）通过event变量可以直接访问事件本身，比如onclick=&quot;alert(event.type)&quot;会弹出click事件。</p> <p>2）this值等于事件的目标元素，这里目标元素是input。比如 onclick=&quot;alert(this.value)&quot;可以得到input元素的value值。</p> <h4 id="_1-2-dom0事件处理程序"><a href="#_1-2-dom0事件处理程序" class="header-anchor">#</a> 1.2 DOM0事件处理程序</h4> <p><strong>把一个函数赋值给一个事件处理程序属性。</strong></p> <p>这种方法简单而且跨浏览器，但是只能为一个元素添加一个事件处理函数。</p> <p>因为这种方法为元素添加多个事件处理函数，则后面的会覆盖前面的。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>myBtn<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>button<span class="token punctuation">'</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>click me<span class="token punctuation">'</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">let</span> myBtn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'myBtn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1.取得btn对象</span>
  myBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//2.相当于给myBtn添加了一个onclick的属性  3.把函数赋值给onclick事件处理程序属性</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'clicked'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>删除事件处理程序</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>myBtn<span class="token punctuation">.</span>onclick<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_1-3-dom2事件处理程序"><a href="#_1-3-dom2事件处理程序" class="header-anchor">#</a> 1.3 DOM2事件处理程序</h4> <p>DOM2级事件处理程序可以为一个元素添加多个事件处理程序。其定义了两个方法用于添加和删除事件处理程序：addEventListener()和removeEventListener()。</p> <p><strong>所有的DOM节点都包含这2个方法。</strong></p> <p>这两个方法都需要3个参数：事件名，事件处理函数，布尔值。</p> <p>这个布尔值为true,在捕获阶段处理事件，为false，在冒泡阶段处理事件，<strong>默认为false</strong>。</p> <p><strong>添加事件处理程序</strong>：现在为按钮添加两个事件处理函数，一个弹出“hello”,一个弹出“world”。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBtn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click me!<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> myBtn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>删除事件处理程序</strong>：通过addEventListener添加的事件处理程序必须通过removeEventListener删除，且参数一致。</p> <p><strong>note</strong>😗*通过addEventListener添加的匿名函数将无法删除。**下面这段代码将不起作用！</p> <div class="language-js extra-class"><pre class="language-js"><code>myBtn<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>看似该removeEventListener与上面的addEventListener参数一致，实则第二个参数中匿名函数是完全不同的。</p> <p>所以为了能删除事件处理程序，代码可以这样写</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBtn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click me!<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> myBtn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">handler</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    myBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>handler<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myBtn<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>handler<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="四-ie事件处理程序"><a href="#四-ie事件处理程序" class="header-anchor">#</a> 四.IE事件处理程序</h3> <div class="language-js extra-class"><pre class="language-js"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>starof<span class="token operator">/</span>p<span class="token operator">/</span><span class="token number">4067121.</span>html
</code></pre></div><h3 id="五-事件对象"><a href="#五-事件对象" class="header-anchor">#</a> 五.事件对象</h3> <p><strong>什么是事件对象？在触发DOM上的事件时都会产生一个对象</strong></p> <h4 id="_1-认识"><a href="#_1-认识" class="header-anchor">#</a> 1.认识</h4> <p>事件在浏览器中是以对象的形式存在的，即event。触发一个事件，就会产生一个事件对象event，该对象<strong>包含着所有与事件有关的信息</strong>。包括导致事件的元素、事件的类型以及其他与特定事件相关的信息。</p> <p>例如：鼠标操作产生的event中会包含鼠标位置的信息；键盘操作产生的event中会包含与按下的键有关的信息。</p> <p>所有浏览器都支持event对象，但支持方式不同，在DOM中event对象必须作为唯一的参数传给事件处理函数，在IE中event是window对象的一个属性。</p> <h4 id="_2-html事件处理程序中的event"><a href="#_2-html事件处理程序中的event" class="header-anchor">#</a> 2.html事件处理程序中的event</h4> <p>这样会创建一个包含局部变量event的函数。可通过event直接访问事件对象。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span> console.log(<span class="token punctuation">'</span>html事件处理程序<span class="token punctuation">'</span>+event.type)<span class="token punctuation">&quot;</span></span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="_3-dom中的事件对象"><a href="#_3-dom中的事件对象" class="header-anchor">#</a> 3.DOM中的事件对象</h4> <p>DOM0级和DOM2级事件处理程序都会把event作为参数传入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;click&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">var</span> btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;DOM0 &amp; click&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//click</span>
    <span class="token punctuation">}</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;DOM2 &amp; click&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//click</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><h4 id="_3-1-dom中事件对象重要属性和方法"><a href="#_3-1-dom中事件对象重要属性和方法" class="header-anchor">#</a> 3.1 DOM中事件对象重要<strong>属性和方法</strong>:</h4> <h4 id="_3-1属性-事件类型和事件目标"><a href="#_3-1属性-事件类型和事件目标" class="header-anchor">#</a> 3.1属性: 事件类型和事件目标</h4> <ul><li>type属性，用于获取事件类型</li> <li>target属性 用户获取事件目标 事件加在哪个元素上。（更具体target.nodeName）</li></ul> <h4 id="_3-2方法-阻止冒泡和默认行为"><a href="#_3-2方法-阻止冒泡和默认行为" class="header-anchor">#</a> 3.2方法: 阻止冒泡和默认行为</h4> <ul><li>stopPropagation()方法 用于阻止事件冒泡</li> <li>preventDefault()方法 阻止事件的默认行为 移动端用的多</li></ul> <h4 id="_4-ie中的事件对象"><a href="#_4-ie中的事件对象" class="header-anchor">#</a> 4.IE中的事件对象</h4> <div class="language-js extra-class"><pre class="language-js"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>starof<span class="token operator">/</span>p<span class="token operator">/</span><span class="token number">4077532.</span>html
</code></pre></div><h3 id="六-事件对象的公共成员"><a href="#六-事件对象的公共成员" class="header-anchor">#</a> 六.事件对象的公共成员</h3> <h4 id="_1-dom中的event的公共成员"><a href="#_1-dom中的event的公共成员" class="header-anchor">#</a> 1.DOM中的event的公共成员</h4> <p>event对象包含与创建它的特定事件有关的属性和方法。触发的事件类型不一样，可用的属性和方法不一样。但是，DOM中所有事件都有以下公共成员。【注意bubbles属性和cancelable属性】</p> <table><thead><tr><th>属性/方法</th> <th>类型</th> <th>读写</th> <th>说明</th></tr></thead> <tbody><tr><td>bubbles</td> <td>Boolean</td> <td>只读</td> <td>表明事件是否冒泡</td></tr> <tr><td><strong>stopPropagation()</strong></td> <td>Function</td> <td>只读</td> <td>取消事件的进一步捕获或冒泡。如果bubbles为true,则可以使用这个方法</td></tr> <tr><td>stopImmediatePropagation()</td> <td>Function</td> <td>只读</td> <td>取消事件的进一步捕获或冒泡**，同时阻止任何事件处理程序被调用**（DOM3级事件中新增）</td></tr> <tr><td>cancelable</td> <td>Boolean</td> <td>只读</td> <td>表明是否可以取消事件的默认行为</td></tr> <tr><td><strong>preventDefault()</strong></td> <td>Function</td> <td>只读</td> <td>取消事件的默认行为。如果cancelable是true，则可以使用这个方法</td></tr> <tr><td>defaultPrevented</td> <td>Boolean</td> <td>只读</td> <td>为true表示已经调用了preventDefault()(DOM3级事件中新增)</td></tr> <tr><td><strong>currentTarget</strong></td> <td>Element</td> <td>只读</td> <td>其事件处理程序当前正在处理事件的那个元素（<strong>currentTarget始终===this,即处理事件的元素</strong>）</td></tr> <tr><td><strong>target</strong></td> <td>Element</td> <td>只读</td> <td>直接事件目标，<strong>真正触发事件的目标</strong></td></tr> <tr><td>detail</td> <td>Integer</td> <td>只读</td> <td>与事件相关的细节信息</td></tr> <tr><td><strong>eventPhase</strong></td> <td>Integer</td> <td>只读</td> <td>调用事件处理程序的阶段：1表示捕获阶段，2表示处于目标阶段，3表示冒泡阶段</td></tr> <tr><td>trusted</td> <td>Boolean</td> <td>只读</td> <td>为true表示事件是由浏览器生成的。为false表示事件是由开发人员通过JavaScript创建的（DOM3级事件中新增）</td></tr> <tr><td><strong>type</strong></td> <td>String</td> <td>只读</td> <td>被触发的事件的类型</td></tr> <tr><td>view</td> <td>AbstractView</td> <td>只读</td> <td>与事件关联的抽象视图。等同于发生事件的window对象</td></tr></tbody></table> <h4 id="_1-1-对比currenttarget和target"><a href="#_1-1-对比currenttarget和target" class="header-anchor">#</a> 1.1.对比currentTarget和target</h4> <p>在事件处理程序内部，对象this始终等于currentTarget的值，而target则只是包含事件的实际目标。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;body中注册的click事件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;this===event.currentTarget? &quot;</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">===</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;currentTarget===document.body?&quot;</span><span class="token operator">+</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>currentTarget<span class="token operator">===</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'event.target===document.getElementById(&quot;btn&quot;)? '</span><span class="token operator">+</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token operator">===</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_1-2-通过type属性-可以在一个函数中处理多个事件。"><a href="#_1-2-通过type属性-可以在一个函数中处理多个事件。" class="header-anchor">#</a> 1.2.通过type属性，可以在一个函数中处理多个事件。</h4> <p>原理：通过检测event.type属性，对不同事件进行不同处理。</p> <p>举例：定义一个handler函数用来处理3种事件：click,mouseover,mouseout。</p> <p>运行效果：点击按钮，弹出框。鼠标经过按钮，按钮背景色变为粉色；鼠标离开按钮，背景色恢复默认。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>btn<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>button<span class="token punctuation">'</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>click<span class="token punctuation">'</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  	<span class="token keyword">let</span> <span class="token function-variable function">handler</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">switch</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'click'</span><span class="token operator">:</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'mouseover'</span><span class="token operator">:</span>
          event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor<span class="token operator">=</span><span class="token string">'pink'</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'mouseout'</span><span class="token operator">:</span>
          event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span>onclick<span class="token operator">=</span>handler<span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span>onmouseover<span class="token operator">=</span>handler<span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span>onmouseouter<span class="token operator">=</span>handler<span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_1-3-stoppropagation-和stopimmediatepropagation-对比"><a href="#_1-3-stoppropagation-和stopimmediatepropagation-对比" class="header-anchor">#</a> 1.3 stopPropagation()和stopImmediatePropagation()对比</h4> <p>同：stopPropagation()和 stopImmediatePropagation()都可以用来取消事件的进一步捕获或冒泡。</p> <p>异：二者的区别在于当一个事件有多个事件处理程序时，stopImmediatePropagation()可以阻止之后事件处理程序被调用。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;buttn click listened once&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//    event.stopPropagation();//取消注释查看效果</span>
<span class="token comment">//    event.stopImmediatePropagation();//取消注释查看效果</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;button click listened twice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;body clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_1-4-eventphase"><a href="#_1-4-eventphase" class="header-anchor">#</a> 1.4 eventPhase</h4> <p>eventPhase值在捕获阶段为1，处于目标阶段为2，冒泡阶段为3。</p> <table><thead><tr><th>常量</th> <th>值</th></tr></thead> <tbody><tr><td>Event.CAPTURING_PHASE</td> <td>1</td></tr> <tr><td>Event.AT_TARGET</td> <td>2</td></tr> <tr><td>Event.BUBBLING_PHASE</td> <td>3</td></tr></tbody></table> <p>可以通过下面代码查看：</p> <div class="language- extra-class"><pre class="language-text"><code>var btn=document.getElementById(&quot;btn&quot;);
btn.onclick= function (event) {
console.log(event.CAPTURING_PHASE); //1
console.log(event.AT_TARGET); //2
console.log(event.BUBBLING_PHASE); //3
}
</code></pre></div><h4 id="_2-ie中event公共成员"><a href="#_2-ie中event公共成员" class="header-anchor">#</a> 2.IE中event公共成员</h4> <p>IE中的event的属性和方法和DOM一样会随着事件类型的不同而不同，但是也有一些是所有对象都有的公共成员，且这些成员大部分有对应的DOM属性或方法。</p> <table><thead><tr><th>属性/方法</th> <th>类型</th> <th>读/写</th> <th>说明</th></tr></thead> <tbody><tr><td>cancelBubble</td> <td>Boolean</td> <td>读/写</td> <td>默认为false,但将其设置为true就可以取消事件冒泡（<strong>与DOM中stopPropagation()方法的作用相同</strong>）</td></tr> <tr><td>returnValue</td> <td>Boolean</td> <td>读/写</td> <td>默认为true，但将其设置为false就可以取消事件的默认行为（<strong>与DOM中的preventDefault()方法的作用相同</strong>）</td></tr> <tr><td>srcElement</td> <td>Element</td> <td>只读</td> <td>事件的目标（<strong>与DOM中的target属性相同</strong>）</td></tr> <tr><td>type</td> <td>String</td> <td>只读</td> <td>被触发的事件的类型</td></tr></tbody></table> <h2 id="ui事件"><a href="#ui事件" class="header-anchor">#</a> UI事件</h2> <h3 id="一-鼠标事件"><a href="#一-鼠标事件" class="header-anchor">#</a> 一.鼠标事件</h3> <h4 id="_1-鼠标事件类型"><a href="#_1-鼠标事件类型" class="header-anchor">#</a> 1.鼠标事件类型</h4> <p><a href="https://www.jianshu.com/p/3acdf5f71d5b" target="_blank" rel="noopener noreferrer">DOM0, DOM2, DOM3介绍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>DOM3级事件中定义了9个鼠标事件。</p> <table><thead><tr><th>鼠标事件名称</th> <th>功能概述</th></tr></thead> <tbody><tr><td>mousedown/mouseup</td> <td>鼠标按钮被按下/释放（左键或者右键）时触发。不能通过键盘触发</td></tr> <tr><td>click/dbclick</td> <td>单击鼠标<strong>左键</strong>或者按下回车键时触发。这点对确保易访问性很重要，意味着onclick事件处理程序既可以通过键盘也可以通过鼠标执行。/双击鼠标<strong>左键</strong>时触发</td></tr> <tr><td>mouseover/mouseout</td> <td>鼠标移入目标元素上方。鼠标移到其后代元素上时会触发/鼠标移出目标元素上方</td></tr> <tr><td>mouseenter/mouseleave</td> <td>鼠标移入元素范围内触发，<strong>该事件不冒泡</strong>，即鼠标移到其后代元素上时不会触发/鼠标移出元素范围时触发，<strong>该事件不冒泡</strong>，即鼠标移到其后代元素时不会触发</td></tr> <tr><td>mousemove</td> <td>鼠标在元素内部移到时不断触发。不能通过键盘触发</td></tr></tbody></table> <p><strong>note</strong>:</p> <p>在一个元素上相继触发mousedown和mouseup事件，才会触发click事件。两次click事件相继触发才会触发dblclick事件。</p> <p>如果取消 了mousedown或mouseup中的一个，click事件就不会被触发。直接或间接取消了click事件，dblclick事件就不会被触发了。</p> <h4 id="_2-事件顺序"><a href="#_2-事件顺序" class="header-anchor">#</a> 2.事件顺序</h4> <p>在单个动作触发多个事件时，事件的顺序是固定的。也就是说，会遵循 <code>mousedown</code> → <code>mouseup</code> → <code>click</code> 的顺序调用处理程序。</p> <h4 id="_2-1事件触发的顺序"><a href="#_2-1事件触发的顺序" class="header-anchor">#</a> 2.1事件触发的顺序</h4> <p>举例：通过双击按钮，看一下上面触发的事件。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousedown&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;mousedown&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mouseup&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;mouseup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;dblclick&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;dblclick&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://images0.cnblogs.com/blog/315302/201411/182134449882507.jpg" alt="双击鼠标,事件触发顺序"></p> <h4 id="_2-2-mouseenter和mouseover"><a href="#_2-2-mouseenter和mouseover" class="header-anchor">#</a> 2.2 mouseenter和mouseover</h4> <p>与css当中使用hover伪类实现的移入移出相比,JS当中的移入和移出是分开操作的,如果移入修改了某些内容,移出时是不会自动还原的</p> <p>区别：</p> <p>mouseover事件会冒泡，这意味着，鼠标移到其后代元素上时会触发。</p> <p>mouseenter事件不冒泡，这意味着，鼠标移到其后代元素上时不会触发。</p> <p>一般情况下mouseover即可，特殊情况才用mousemove，mousemove更耗资源，比如要监控鼠标坐标的变化等</p> <p>//事件冒泡: 即在子元素上触发的事件会向上传递至父级元素，并触发绑定在父级元素上的相应事件。</p> <p>在事件触发时，浏览器会产生一个event对象，在这个对象上有一个target属性，指向了触发事件的最底层的DOM，通过target我们可以准确的找到事件触发的元素。</p> <p><strong>mouseenter不支持冒泡, mouseover支持冒泡</strong>  mousemover也不支持冒泡</p> <div class="language-html extra-class"><pre class="language-html"><code>//原文链接：https://blog.csdn.net/weixin_41072247/article/details/79315402
1.鼠标移入父级div,33行与30行分别先后打印 outer outer
2.鼠标移入子级div,33行与30行分别先后打印 inner outer

<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>onmouseover&amp;onmouseenter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"> 
        <span class="token selector">#outer</span><span class="token punctuation">{</span>
            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">#inner</span><span class="token punctuation">{</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">left</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>       
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>outer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        outer<span class="token punctuation">.</span><span class="token function-variable function">onmouseenter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">// outer</span>
        <span class="token punctuation">}</span>
        outer<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">// inner</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_2-3-mouseover和mousemove的区别"><a href="#_2-3-mouseover和mousemove的区别" class="header-anchor">#</a> 2.3 mouseover和mousemove的区别</h4> <p>一般情况下mouseover即可，特殊情况才用mousemove，mousemove更耗资源，比如要监控鼠标坐标的变化等。</p> <p>onmousemove</p> <p>鼠标移动事件, 在绑定了这个事件的元素内, 只要移动,就会持续高频次触发, 一直检测你的移动状态</p> <p>只要想绑定一个事件, 让它在整个页面当中都可以生效,直接绑定给==document==</p> <h4 id="_3-鼠标左键和右键"><a href="#_3-鼠标左键和右键" class="header-anchor">#</a> 3.鼠标左键和右键</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
document<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">var</span> oEvent<span class="token operator">=</span>ev<span class="token operator">||</span>event<span class="token punctuation">;</span> <span class="token comment">//IE浏览器直接使用event或者window.event得到事件本身。</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>oEvent<span class="token punctuation">.</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// IE下鼠标的 左键是1 ，  右键是2   ff和chrome下 鼠标左键是0  右键是2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h4 id="_4-鼠标按钮"><a href="#_4-鼠标按钮" class="header-anchor">#</a> 4.鼠标按钮</h4> <p>与点击相关的事件始终具有 <code>button</code> 属性，该属性允许获取确切的鼠标按钮。</p> <p>通常我们不在 <code>click</code> 和 <code>contextmenu</code> 事件中使用这一属性，因为前者只在单击鼠标左键时触发，后者只在单击鼠标右键时触发。</p> <p>不过，在 <code>mousedown</code> 和 <code>mouseup</code> 事件中则可能需要用到 <code>event.button</code>，因为这两个事件在任何按键上都会触发，所以我们可以使用 <code>button</code> 属性来区分是左键单击还是右键单击。</p> <p><code>event.button</code> 的所有可能值如下：</p> <table><thead><tr><th>鼠标按键状态</th> <th>event.button</th></tr></thead> <tbody><tr><td>左键 (主要按键)</td> <td>0</td></tr> <tr><td>中键 (辅助按键)</td> <td>1</td></tr> <tr><td>右键 (次要按键)</td> <td>2</td></tr></tbody></table> <h4 id="_5-组合键"><a href="#_5-组合键" class="header-anchor">#</a> 5.组合键</h4> <p>所有的鼠标事件都包含有关按下的组合键的信息。</p> <p>事件属性：</p> <ul><li><code>shiftKey</code>：Shift</li> <li><code>altKey</code>：Alt（或对于 Mac 是 Opt）</li> <li><code>ctrlKey</code>：Ctrl</li> <li><code>metaKey</code>：对于 Mac 是 Cmd</li></ul> <p>如果在事件期间按下了相应的键，则它们为 <code>true</code>。</p> <p>比如，下面这个按钮仅在 Alt+Shift+click 时才有效：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>button<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>Alt+Shift+click on me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	button<span class="token punctuation">.</span><span class="token function-variable function">click</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>altKey <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>shiftKey<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hooray'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_6-鼠标坐标"><a href="#_6-鼠标坐标" class="header-anchor">#</a> 6. 鼠标坐标</h4> <p>所有的鼠标事件都提供了两种形式的坐标：</p> <ol><li>相对于窗口的坐标：<code>clientX</code> 和 <code>clientY</code>。以当前窗口的左上角为参照物，并且同一位置的坐标会随着页面的滚动而改变。</li> <li>相对于文档的坐标：<code>pageX</code> 和 <code>pageY</code>。以文档的左上角为参照物，并且同一位置的坐标不随页面的滚动而改变</li></ol> <p>案例:鼠标移动到输入字段上，可以看到 <code>clientX/clientY</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token special-attr"><span class="token attr-name">onmouseover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">=</span>event<span class="token punctuation">.</span>clientX<span class="token operator">+</span><span class="token string">':'</span><span class="token operator">+</span>event<span class="token punctuation">.</span>clientY</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mouse over me<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="_7-防止鼠标按下时的操作"><a href="#_7-防止鼠标按下时的操作" class="header-anchor">#</a> 7.防止鼠标按下时的操作</h4> <p>双击鼠标会有副作用，在某些界面中可能会出现干扰：它会选择文本。</p> <p>比如，双击下面的文本，除了我们的处理程序外，还会选择文本：</p> <p>比如,  如果按下鼠标左键，并在不松开的情况下移动鼠标，这也常常会造成不必要的选择。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">ondbclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>alert(dbclick)<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>double-click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如何解决?在这种情况下，最合理的方式是防止浏览器对 <code>mousedown</code> 进行操作。这样能够阻止刚刚提到的两种选择：</p> <div class="language-html extra-class"><pre class="language-html"><code>Before...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token special-attr"><span class="token attr-name">ondblclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Click!'</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token special-attr"><span class="token attr-name">onmousedown</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token keyword">return</span> <span class="token boolean">false</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  Double-click me
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
...After
</code></pre></div><p>如何防止复制?如果我们想禁用选择以保护我们页面的内容不被复制粘贴，那么我们可以使用另一个事件：<code>oncopy</code></p> <div class="language-html extra-class"><pre class="language-html"><code>&lt;div oncopy=&quot;alert('copying forbidden!')';return false&quot;
  Dear user,
  The copying is forbidden for you.
  If you know JS or HTML, then you can get everything from the page source though.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>   
</code></pre></div><h4 id="_8-总结"><a href="#_8-总结" class="header-anchor">#</a> 8.<a href="https://zh.javascript.info/mouse-events-basics#zong-jie" target="_blank" rel="noopener noreferrer">总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p>鼠标事件有以下属性：</p> <ul><li>按钮：<code>button</code>。</li> <li>组合键（如果被按下则为 <code>true</code>）：<code>altKey</code>，<code>ctrlKey</code>，<code>shiftKey</code> 和 <code>metaKey</code>（Mac）。
<ul><li>如果你想处理 Ctrl，那么不要忘记 Mac 用户，他们通常使用的是 Cmd，所以最好检查 <code>if (e.metaKey || e.ctrlKey)</code>。</li></ul></li> <li>窗口相对坐标：<code>clientX/clientY</code>。</li> <li>文档相对坐标：<code>pageX/pageY</code>。</li></ul> <p><code>mousedown</code> 的默认浏览器操作是文本选择，如果它对界面不利，则应避免它。</p> <h4 id="_9-案例-可选列表"><a href="#_9-案例-可选列表" class="header-anchor">#</a> 9.案例-可选列表</h4> <p>创建一个可以选择元素的列表，例如在文件管理器中。</p> <ul><li>点击列表元素，只选择该元素（添加 <code>.selected</code> 类），取消选择其他所有元素。</li> <li>如果点击时，按键 Ctrl（在 Mac 中为 Cmd）是被按下的，则选择会被切换到被点击的元素上，但其他元素不会被改动。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//DOM classList属性</span>
classList 属性返回元素的类名，作为 DOMTokenList 对象。
该属性用于在元素中添加，移除及切换 <span class="token constant">CSS</span> 类。
classList 属性是只读的，但你可以使用 <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 和 <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法修改它。

语法<span class="token operator">:</span>
element<span class="token punctuation">.</span>classList
返回值<span class="token operator">:</span>
一个 DOMTokenList<span class="token punctuation">,</span> 包含元素的类名列表
方法
<span class="token function">toggle</span><span class="token punctuation">(</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span><span class="token punctuation">)</span> 在元素中切换类名 第一个参数为要在元素中移除的类名 第二个是可选参数，是个布尔值用于设置元素是否强制添加或移除类，不管该类名是否存在

event<span class="token punctuation">.</span>target 打印的是节点元素及内容
event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList返回元素的类名 可替换 新增 删除
event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className
</code></pre></div><iframe height="300" scrolling="no" title="dom-鼠标事件-可选列表" src="https://codepen.io/westover/embed/yLMxjmE?height=265&amp;theme-id=light&amp;default-tab=js,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="allowfullscreen" style="width:100%;">
  See the Pen <a href="https://codepen.io/westover/pen/yLMxjmE">dom-鼠标事件-可选列表</a> by xxl
  (<a href="https://codepen.io/westover">@westover</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <h3 id="二-移动鼠标"><a href="#二-移动鼠标" class="header-anchor">#</a> 二.移动鼠标</h3> <h4 id="_1-mouseover-mouseouter"><a href="#_1-mouseover-mouseouter" class="header-anchor">#</a> 1.mouseover mouseouter</h4> <p>当鼠标指针移到某个元素上时，<code>mouseover</code> 事件就会发生，而当鼠标离开该元素时，<code>mouseout</code> 事件就会发生</p> <p><svg xmlns="http://www.w3.org/2000/svg" width="278" height="92" viewBox="0 0 278 92"><defs><style>@import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono);@font-face{font-family:'PT Mono';font-weight:700;font-style:normal;src:local('PT MonoBold'),url(/font/PTMonoBold.woff2) format('woff2'),url(/font/PTMonoBold.woff) format('woff'),url(/font/PTMonoBold.ttf) format('truetype')}</style></defs><g id="dom" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"><g id="mouseover-mouseout.svg"><path id="Rectangle-6" fill="#FFF9EB" stroke="#E8C48E" stroke-width="2" d="M95 25h88.014v50.451H95z"></path><text id="&lt;DIV&gt;" fill="#8A704D" font-family="OpenSans-Bold, Open Sans" font-size="14" font-weight="bold"><tspan x="118.964" y="56">&lt;DIV&gt;</tspan></text><path id="Fill-55" fill="#EE6B47" d="M109 51.828S88.159 39.088 74.327 34c-.336 2.104-.67 4.208-1.007 6.311-22.67-1.178-45.696.566-67.32 5.234l8.31 12.565c18.27-3.944 37.724-5.417 56.88-4.422-.337 2.105-.672 4.208-1.007 6.312C81.31 56.21 109 51.828 109 51.828"></path><text id="mouseover" fill="#8A704D" font-family="PTMono-Bold, PT Mono" font-size="14" font-weight="bold"><tspan x="17" y="21">mouseover</tspan></text><path id="Fill-56" fill="#EE6B47" d="M268 51.828S247.159 39.088 233.327 34c-.336 2.104-.67 4.208-1.007 6.311-22.67-1.178-45.696.566-67.32 5.234l8.31 12.565c18.27-3.944 37.724-5.417 56.88-4.422-.337 2.105-.672 4.208-1.007 6.312C240.31 56.21 268 51.828 268 51.828"></path><text id="mouseout" fill="#8A704D" font-family="PTMono-Bold, PT Mono" font-size="14" font-weight="bold"><tspan x="193" y="21">mouseout</tspan></text></g></g></svg></p> <h4 id="_2-relatedtarget属性"><a href="#_2-relatedtarget属性" class="header-anchor">#</a> 2.relatedTarget属性</h4> <p>此属性是对 <code>target</code> 的补充。当鼠标从一个元素离开并去往另一个元素时，其中一个元素就变成了 <code>target</code>，另一个就变成了 <code>relatedTarget</code>.</p> <p>对于 <code>mouseover</code>：</p> <ul><li><code>event.target</code> —— 是鼠标移过的那个元素。</li> <li><code>event.relatedTarget</code> —— 是鼠标来自的那个元素（<code>relatedTarget</code> → <code>target</code>）。</li></ul> <p><code>mouseout</code> 则与之相反：</p> <ul><li><code>event.target</code> —— 是鼠标离开的元素。</li> <li><code>event.relatedTarget</code> —— 是鼠标移动到的，当前指针位置下的元素（<code>target</code> → <code>relatedTarget</code>）</li></ul> <p>note:<code>relatedTarget</code> 属性可以为 <code>null</code>. 这是正常现象，仅仅是意味着鼠标不是来自另一个元素，而是来自窗口之外。或者它离开了窗口。</p> <h4 id="_2-1-案例"><a href="#_2-1-案例" class="header-anchor">#</a> 2.1 案例</h4> <p>下面这个示例中，每张脸及其功能都是单独的元素。当你移动鼠标时，你可以在文本区域中看到鼠标事件。</p> <p>每个事件都具有关于 <code>target</code> 和 <code>relatedTarget</code> 的信息</p> <p>//<strong>失败版本</strong>. 父元素没有使用绝对定位,子元素使用overflow:hidden以后,出现元素下移.使用vertical-align之后,只有父元素回归位置,子元素却没有.</p> <div class="language-html extra-class"><pre class="language-html"><code>https://codepen.io/westover/pen/ExWLpqM
</code></pre></div><p>//<strong>成功版本</strong></p> <iframe height="265" scrolling="no" title="WNpKQZQ" src="https://codepen.io/westover/embed/WNpKQZQ?height=265&amp;theme-id=light&amp;default-tab=css,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="allowfullscreen" style="width:100%;">
  See the Pen <a href="https://codepen.io/westover/pen/WNpKQZQ">WNpKQZQ</a> by xxl
  (<a href="https://codepen.io/westover">@westover</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <h4 id="_3-跳过元素"><a href="#_3-跳过元素" class="header-anchor">#</a> 3. 跳过元素</h4> <p>当鼠标移动时，就会触发 <code>mousemove</code> 事件。但这并不意味着每个像素都会导致一个事件。浏览器会一直检查鼠标的位置。如果发现了变化，就会触发事件。这意味着，如果访问者非常快地移动鼠标，那么某些 DOM 元素就可能被跳过.</p> <p>鼠标指针并不会“访问”所有元素。它可以“跳过”一些元素. 鼠标指针可能会从窗口外跳到页面的中间。在这种情况下，<code>relatedTarget</code> 为 <code>null</code></p> <p><strong>案例:</strong></p> <p>将鼠标指针移动到 <code>&lt;div id=&quot;child&quot;&gt;</code> 中，然后将其快速向下移动过其父级元素。如果移动速度足够快，则父元素就会被忽略。鼠标会越过父元素而不会引起其注意</p> <iframe height="320" scrolling="no" title="VwpBVrG" src="https://codepen.io/westover/embed/VwpBVrG?height=265&amp;theme-id=light&amp;default-tab=js,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="allowfullscreen" style="width:100%;">
  See the Pen <a href="https://codepen.io/westover/pen/VwpBVrG">VwpBVrG</a> by xxl
  (<a href="https://codepen.io/westover">@westover</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <h4 id="_4-事件mouseenter和mouseleave"><a href="#_4-事件mouseenter和mouseleave" class="header-anchor">#</a> 4. 事件mouseenter和mouseleave</h4> <p>事件 <code>mouseenter/mouseleave</code> 类似于 <code>mouseover/mouseout</code>。它们在鼠标指针进入/离开元素时触发。</p> <p>但是有两个重要的区别：</p> <ol><li>元素内部与后代之间的转换不会产生影响。</li> <li>事件 <code>mouseenter/mouseleave</code> 不会冒泡</li></ol> <h4 id="_5-事件委托"><a href="#_5-事件委托" class="header-anchor">#</a> 5.事件委托</h4> <p>事件 <code>mouseenter/leave</code> 非常简单且易用。但它们不会冒泡。因此，我们不能使用它们来进行事件委托</p> <p>例如, &lt;table&gt; 上的 mouseenter/leave 的处理程序仅在鼠标指针进入/离开整个表格时才会触发。无法获取有关其内部移动的任何信息。</p> <p>因此使用 mouseover/mouseout.</p> <h4 id="_6-总结"><a href="#_6-总结" class="header-anchor">#</a> 6.总结</h4> <ul><li>快速移动鼠标可能会跳过中间元素</li> <li><code>mouseover/out</code> 和 <code>mouseenter/leave</code> 事件还有一个附加属性：<code>relatedTarget</code>。这就是我们来自/到的元素，是对 <code>target</code> 的补充</li> <li>即使我们从父元素转到子元素时，也会触发 <code>mouseover/out</code> 事件。浏览器假定鼠标一次只会位于一个元素上 —— 最深的那个</li> <li><code>mouseenter/leave</code> 事件在这方面不同：它们仅在鼠标进入和离开元素时才触发。并且它们不会冒泡</li></ul> <h4 id="_7-案例"><a href="#_7-案例" class="header-anchor">#</a> 7. 案例</h4> <p>1.工具提示行为</p> <p>编写 JavaScript，在带有 <code>data-tooltip</code> 特性（attribute）的元素上显示一个工具提示。该特性的值应该成为工具提示的文本</p> <iframe height="500" scrolling="no" title="dom-工具提示行为" src="https://codepen.io/westover/embed/XWMPjjE?height=265&amp;theme-id=light&amp;default-tab=js,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="allowfullscreen" style="width:100%;">
  See the Pen <a href="https://codepen.io/westover/pen/XWMPjjE">dom-工具提示行为</a> by xxl
  (<a href="https://codepen.io/westover">@westover</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <p>2.智能工具提示</p> <p>编写一个函数，该函数仅在访问者将鼠标 <strong>移至</strong> 元素而不是 <strong>移过</strong> 元素的情况下，在该元素上显示工具提示</p> <p>如果访问者将鼠标移至元素上，并停下来 —— 显示工具提示。如果他们只是将鼠标移过元素，那就没必要显示</p> <div class="language-js extra-class"><pre class="language-js"><code>
这个案例真的比较难理解<span class="token punctuation">,</span>起码我是这么想<span class="token punctuation">.</span>
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>zh<span class="token punctuation">.</span>javascript<span class="token punctuation">.</span>info<span class="token operator">/</span>mousemove<span class="token operator">-</span>mouseover<span class="token operator">-</span>mouseout<span class="token operator">-</span>mouseenter<span class="token operator">-</span>mouseleave#shi<span class="token operator">-</span>jian<span class="token operator">-</span>mouseovermouseoutrelatedtarget
</code></pre></div><h3 id="三-鼠标拖放事件"><a href="#三-鼠标拖放事件" class="header-anchor">#</a> 三.鼠标拖放事件??</h3> <p>如何使用鼠标事件来实现拖放</p> <h3 id="四-指针事件"><a href="#四-指针事件" class="header-anchor">#</a> 四.指针事件??</h3> <p>指针事件（Pointer Events）是一种用于处理来自各种输入设备（例如鼠标、触控笔和触摸屏等）的输入信息的现代化解决方案。</p> <p>除非你写的代码需要兼容旧版本的浏览器，例如 IE 10 或 Safari 12 或更低的版本，否则无需继续使用鼠标事件或触摸事件 —— 我们可以使用指针事件。</p> <h4 id="_1-指针事件类型"><a href="#_1-指针事件类型" class="header-anchor">#</a> 1.指针事件类型</h4> <table><thead><tr><th>指针事件</th> <th>类似的鼠标事件</th></tr></thead> <tbody><tr><td>pointerdown</td> <td>mousedown</td></tr> <tr><td>pointerup</td> <td>mouseup</td></tr> <tr><td>pointermove</td> <td>mousemove</td></tr> <tr><td>pointerover</td> <td>mouseover</td></tr> <tr><td>pointerout</td> <td>mouseout</td></tr> <tr><td>pointerenter</td> <td>mouseenter</td></tr> <tr><td>pointerlevave</td> <td>mouseleave</td></tr> <tr><td>pointercancel</td> <td></td></tr> <tr><td>gotpointercapture</td> <td></td></tr> <tr><td>lostpointercapture</td> <td></td></tr></tbody></table> <p>note:</p> <p>我们可以把代码中的 <code>mouse&lt;event&gt;</code> 都替换成 <code>pointer&lt;event&gt;</code>，程序仍然正常兼容鼠标设备。</p> <p>替换之后，程序对触屏设备的支持会“魔法般”地提升。但是，我们可能需要在 CSS 中的某些地方添加 <code>touch-action: none</code></p> <h4 id="_2-指针事件属性"><a href="#_2-指针事件属性" class="header-anchor">#</a> 2.指针事件属性</h4> <p>指针事件具备和鼠标事件完全相同的属性，包括 <code>clientX/Y</code> 和 <code>target</code> 等，以及一些其他属性</p> <p><strong>pointerId</strong>  触发当前事件的指针唯一标识符</p> <p>浏览器生成的。使我们能够处理多指针的情况，例如带有触控笔和多点触控功能的触摸屏</p> <p><strong>pointerType</strong>  指针的设备类型。必须为字符串，可以是：“mouse”、“pen” 或 “touch”。</p> <p>可以使用这个属性来针对不同类型的指针输入做出不同响应</p> <p><strong>isPrimary</strong> 当指针为首要指针（多点触控时按下的第一根手指）时为 <code>true</code></p> <p><strong>其他</strong></p> <h4 id="_3-多点触控"><a href="#_3-多点触控" class="header-anchor">#</a> 3.多点触控</h4> <p>未完成</p> <h3 id="五-键盘事件keydown和keyup"><a href="#五-键盘事件keydown和keyup" class="header-anchor">#</a> 五.键盘事件keydown和keyup</h3> <p>在现代设备上，还有其他“输入内容”的方法,例如，人们使用语音识别（尤其是在移动端设备上）或用鼠标复制/粘贴。</p> <p>如果我们想要跟踪 <code>&lt;input&gt;</code> 字段中的所有输入，那么键盘事件是不够的。无论如何，还需要一个名为 <code>input</code> 的事件来跟踪 <code>&lt;input&gt;</code> 字段中的更改。</p> <p>当我们想要处理键盘行为时，应该使用键盘事件（虚拟键盘也算）。例如，对方向键 Up 和 Down 或热键（包括按键的组合）作出反应。</p> <iframe height="300" scrolling="no" title="dom-键盘事件" src="https://codepen.io/westover/embed/YzZBKoP?height=265&amp;theme-id=light&amp;default-tab=html,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="allowfullscreen" style="width:100%;">
  See the Pen <a href="https://codepen.io/westover/pen/YzZBKoP">dom-键盘事件</a> by xxl
  (<a href="https://codepen.io/westover">@westover</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <h4 id="_1-keydown-keyup"><a href="#_1-keydown-keyup" class="header-anchor">#</a> 1.keydown/keyup</h4> <p>当一个按键被按下时，会触发 <code>keydown</code> 事件，而当按键被释放时，会触发 <code>keyup</code> 事件。</p> <h5 id="event-code-event-key"><a href="#event-code-event-key" class="header-anchor">#</a> event.code/event.key</h5> <p>事件对象的 <code>key</code> 属性允许获取字符，而事件对象的 <code>code</code> 属性则允许获取“物理按键代码”</p> <p>例如，同一个按键 Z，可以与或不与 <code>Shift</code> 一起按下。我们会得到两个不同的字符：小写的 <code>z</code> 和大写的 <code>Z</code>。</p> <p><code>event.key</code> 正是这个字符，并且它将是不同的。但是，<code>event.code</code> 是相同的：</p> <table><thead><tr><th>Key</th> <th>event.key</th> <th>event.code</th></tr></thead> <tbody><tr><td>Z</td> <td>z(小写)</td> <td>KeyZ</td></tr> <tr><td>shift+Z</td> <td>Z(大写)</td> <td>KeyZ</td></tr></tbody></table> <p><strong>大小写敏感：</strong><code>&quot;KeyZ&quot;</code><strong>，不是</strong> <code>&quot;keyZ&quot;</code></p> <p><strong>两个如何选择?</strong></p> <p>1.event.code</p> <p><code>vent.key</code> 的值是一个字符，它随语言而改变。如果访问者在 OS 中使用多种语言，并在它们之间进行切换，那么相同的按键将给出不同的字符。因此检查 <code>event.code</code> 会更好，因为它总是相同的。</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>code <span class="token operator">===</span><span class="token string">'KeyZ'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>ctrlKey <span class="token operator">||</span> event<span class="token punctuation">.</span>metaKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Undo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>2.看情况</p> <ul><li><p>想要处理与布局有关的按键？那么 <code>event.key</code> 是我们必选的方式。</p></li> <li><p>一个热键即使在切换了语言后，仍能正常使用？那么 <code>event.code</code> 可能会更好。</p></li></ul> <p><strong>event.code问题</strong></p> <p>对于不同的键盘布局，相同的按键可能会具有不同的字符。幸运的是，这种情况只发生在几个代码上</p> <p>为了可靠地跟踪与受键盘布局影响的字符，使用 <code>event.key</code> 可能是一个更好的方式。</p> <h4 id="_2-自动重复"><a href="#_2-自动重复" class="header-anchor">#</a> 2.自动重复</h4> <p>如果按下一个键足够长的时间，它就会开始“自动重复”：<code>keydown</code> 会被一次又一次地触发，然后当按键被释放时，我们最终会得到 <code>keyup</code>。因此，有很多 <code>keydown</code> 却只有一个 <code>keyup</code> 是很正常的。</p> <p>对于由自动重复触发的事件，<code>event</code> 对象的 <code>event.repeat</code> 属性被设置为 <code>true</code>。</p> <h4 id="_3-默认行为"><a href="#_3-默认行为" class="header-anchor">#</a> 3.默认行为</h4> <p>例如:</p> <ul><li>出现在屏幕上的一个字符（最明显的结果）。</li> <li>一个字符被删除（Delete 键）。</li> <li>滚动页面（PageDown 键）。</li> <li>浏览器打开“保存页面”对话框（Ctrl+S）</li> <li>……等。</li></ul> <p>阻止对 <code>keydown</code> 的默认行为可以取消大多数的行为，但基于 OS 的特殊按键除外。例如，在 Windows 中，Alt+F4 会关闭当前浏览器窗口。并且无法通过在 JavaScript 中阻止默认行为来阻止它。</p> <p>1.案例: 下面的这个 <code>&lt;input&gt;</code> 期望输入的内容为一个电话号码，因此它不会接受除数字，<code>+</code>，<code>()</code> 和 <code>-</code> 以外的按键</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token special-attr"><span class="token attr-name">onkeydown</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token keyword">return</span> <span class="token function">checkPhoneKey</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>key<span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>Phone,please<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">function</span> <span class="token function">checkPhoneKey</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>key<span class="token operator">&gt;=</span><span class="token string">'0'</span><span class="token operator">&amp;&amp;</span>key<span class="token operator">&lt;=</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token operator">||</span>key<span class="token operator">==</span><span class="token string">'+'</span><span class="token operator">||</span>key<span class="token operator">==</span><span class="token string">'-'</span><span class="token operator">||</span>key<span class="token operator">==</span><span class="token string">'('</span><span class="token operator">||</span>key<span class="token operator">==</span><span class="token string">')'</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

//事件名称前添加return的原因?
https://www.cnblogs.com/peijie-tech/p/3748453.html
</code></pre></div><p>请注意，像 Backspace，Left，Right，Ctrl+V 这样的特殊按键在输入中无效。这是严格过滤器 <code>checkPhoneKey</code> 的副作用。</p> <p>过滤条件放宽:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">function</span> <span class="token function">checkPhoneKey</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>key <span class="token operator">&gt;=</span> <span class="token string">'0'</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">&lt;=</span> <span class="token string">'9'</span><span class="token punctuation">)</span> <span class="token operator">||</span> key <span class="token operator">==</span> <span class="token string">'+'</span> <span class="token operator">||</span> key <span class="token operator">==</span> <span class="token string">'('</span> <span class="token operator">||</span> key <span class="token operator">==</span> <span class="token string">')'</span> <span class="token operator">||</span> key <span class="token operator">==</span> <span class="token string">'-'</span> <span class="token operator">||</span>
    key <span class="token operator">==</span> <span class="token string">'ArrowLeft'</span> <span class="token operator">||</span> key <span class="token operator">==</span> <span class="token string">'ArrowRight'</span> <span class="token operator">||</span> key <span class="token operator">==</span> <span class="token string">'Delete'</span> <span class="token operator">||</span> key <span class="token operator">==</span> <span class="token string">'Backspace'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input onkeydown<span class="token operator">=</span><span class="token string">&quot;return checkPhoneKey(event.key)&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;Phone, please&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;tel&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="_4-遗存"><a href="#_4-遗存" class="header-anchor">#</a> 4.遗存</h4> <p>大多数浏览器对它们都存在兼容性问题: <code>keypress</code> 事件，还有事件对象的 <code>keyCode</code>、<code>charCode</code> 和 <code>which</code> 属性</p> <p>大多数浏览器对它们都存在兼容性问题，以致使该规范的开发者不得不弃用它们并创建新的现代的事件（本文上面所讲的这些事件），除此之外别无选择。旧的代码仍然有效，因为浏览器还在支持它们，但现在完全没必要再使用它们。</p> <h4 id="_5-总结"><a href="#_5-总结" class="header-anchor">#</a> 5.总结</h4> <p>按一个按键总是会产生一个键盘事件，无论是符号键，还是例如 Shift 或 Ctrl 等特殊按键。唯一的例外是有时会出现在笔记本电脑的键盘上的 Fn 键。它没有键盘事件，因为它通常是被在比 OS 更低的级别上实现的。</p> <p><strong>键盘事件</strong></p> <ul><li>keydonw 按下键(如果长按按键,则将自动重复)</li> <li>keyup 释放按键时</li></ul> <p><strong>键盘事件主要属性</strong></p> <ul><li>code 按键代码('KeyA', 'ArrowLeft'等),特定于键盘上按键的物理位置.</li> <li>key 字符('A', 'a'等),对非字符按键,通常具有和code相同的值</li></ul> <p>过去，键盘事件有时会被用于跟踪表单字段中的用户输入。这并不可靠，因为输入可能来自各种来源。我们有 <code>input</code> 和 <code>change</code> 事件来处理任何输入</p> <h4 id="_6-练习"><a href="#_6-练习" class="header-anchor">#</a> 6.练习</h4> <p>创建一个 <code>runOnKeys(func, code1, code2, ... code_n)</code> 函数，在同时按下 <code>code1, code2, ... code_n</code> 键时运行函数 <code>func</code>。</p> <p>例如，当按键 <code>&quot;Q&quot;</code> 和 <code>&quot;W&quot;</code> 被一起按下时（任何语言中，无论是否 CapsLock），下面的代码将显示 <code>alert</code>：</p> <iframe height="265" scrolling="no" title="dom-键盘事件keyup/keydown" src="https://codepen.io/westover/embed/WNpPopw?height=265&amp;theme-id=light&amp;default-tab=js,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="allowfullscreen" style="width:100%;">
  See the Pen <a href="https://codepen.io/westover/pen/WNpPopw">dom-键盘事件keyup/keydown</a> by xxl
  (<a href="https://codepen.io/westover">@westover</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <h3 id="六-滚动"><a href="#六-滚动" class="header-anchor">#</a> 六.滚动</h3> <h4 id="_5-事件坐标-鼠标的位置"><a href="#_5-事件坐标-鼠标的位置" class="header-anchor">#</a> 5. 事件坐标(鼠标的位置)++.</h4> <p>事件坐标,就是事件发生时,鼠标所在的位置</p> <h4 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h4> <h5 id="clientx-clienty"><a href="#clientx-clienty" class="header-anchor">#</a> clientX &amp;&amp; clientY</h5> <p>取值是鼠标相对视口的水平和垂直距离,相对于 ==视口的左上角==(以视口左上角为原点) 最常用 受滚动条影响</p> <h5 id="pagex-pagey"><a href="#pagex-pagey" class="header-anchor">#</a> pageX &amp;&amp; pageY</h5> <p>取值鼠标相对于页面的水平和垂直距离, 相对的是==页面的左上角== (以页面左上角为原点) 不受滚动条影响</p> <h5 id="offsetx-offsety"><a href="#offsetx-offsety" class="header-anchor">#</a> offsetX &amp;&amp; offsetY</h5> <p>取值鼠标相对于自身元素的水平距离和垂直距离, 相对的是==元素自身左上角==(以自身元素左上角为原点)</p> <h4 id="实例"><a href="#实例" class="header-anchor">#</a> 实例</h4> <div class="language-HTML extra-class"><pre class="language-html"><code>- 图片跟随鼠标移动而移动, 使用循环定时器快速切换
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">img</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> imgNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            num<span class="token operator">++</span><span class="token punctuation">;</span>
            imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> num<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">'jpg'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            imgNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            imgNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="二级菜单切换"><a href="#二级菜单切换" class="header-anchor">#</a> 二级菜单切换</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list clearFix<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>男装
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>衬衫<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>裤子<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>鞋<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>女装
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>衬衫<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>裤子<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>鞋<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>电器
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>衬衫<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>裤子<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>鞋<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">var</span> items <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.item'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> lists <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'.list&gt;li'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>lists<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>index <span class="token operator">=</span> i<span class="token punctuation">;</span>			
            <span class="token comment">//用for给li添加index属性索引,以实现和二级ul下标对应</span>
		    <span class="token comment">//</span>
            
            <span class="token comment">//lists[i].onclick = function(){</span>
            <span class="token comment">//    console.log(this.index);</span>
            <span class="token comment">//} 检查一级ul下的li的索引是否和index属性一一对应</span>
           lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onmouseenter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               items<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
               <span class="token comment">//为什么不用i代替this.index? </span>
               <span class="token comment">//循环都执行后才会给每个li绑定事件.当触发事件时,外层循环早已执行完.i的值是循环终止的值.在循环外是i+1. </span>
           <span class="token punctuation">}</span><span class="token comment">//循环操作绑定事件回调的时候,在回调内部一定不能使用外部循环的变量,因为它一定是最后一个数</span>
           lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onmouseleave</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               items<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="八-键盘事件"><a href="#八-键盘事件" class="header-anchor">#</a> 八.键盘事件</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token operator">-</span> <span class="token function">键盘事件分为onkeyup</span><span class="token punctuation">(</span>键盘抬起<span class="token punctuation">)</span><span class="token function">和onkeydown</span><span class="token punctuation">(</span>键盘按下<span class="token punctuation">)</span>两种
<span class="token operator">-</span> 实际开发中<span class="token punctuation">,</span>onkeyup用的多一些<span class="token punctuation">.</span>因为在一次交互逻辑中<span class="token punctuation">,</span>抬起事件只会被触发一次<span class="token punctuation">,</span>不会反复调用回调函数<span class="token punctuation">.</span>但是onkeydown事件<span class="token punctuation">,</span>如果不抬起键盘<span class="token punctuation">,</span>会一直触发
<span class="token operator">-</span> 判断用户输入哪个键
<span class="token operator">-</span> 通过事件对象上一个叫做keycode的属性<span class="token punctuation">,</span>来判断当前的按键
<span class="token operator">-</span> 高级浏览器中<span class="token punctuation">,</span>事件对象会作为回调函数的第一个形参传递过来供我们使用 常见名字event ev e
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>text<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scirpt</span><span class="token punctuation">&gt;</span></span>
window.onload = function(){
    var inputNode = document.querySelector('input');
    inputNode.onkeyup = function(event){
    //通常判断按键时,直接写一个if,对按键进行判断,然后将后续逻辑写在if里面
    	if(event.keycode === 13){  //enter键的keycode值是13
    		this.value = '';	   //清空事件源input标签的内容
    		//this.value value的值是字符串
    		}
    	}
    }
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scirpt</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="九-光标事件"><a href="#九-光标事件" class="header-anchor">#</a> 九.光标事件</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token operator">-</span> 获得焦点 onfocus
<span class="token operator">-</span> 失去焦点 onblur
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">-</span> 案例<span class="token operator">:</span> 输入框得到焦点 背景色变pink 文字颜色

window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> inputNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    inputNode<span class="token punctuation">.</span>onfocus <span class="token operator">=</span> <span class="token function">fucntion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'获得焦点'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="爱好选择器"><a href="#爱好选择器" class="header-anchor">#</a> 爱好选择器</h4> <div class="language-html extra-class"><pre class="language-html"><code>- if表达式的结果为true和false,可将直接表达式赋值给执行语句 缩减语句

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkAllBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>全选/全不选
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>学习
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>买东西
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>滑雪
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>打游戏
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>全选<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>全不选<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>反选<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> checkbox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.checkAllBox'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> items <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.item'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn3 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySeletocr</span><span class="token punctuation">(</span><span class="token string">'.btn3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//全选和全不选</span>
        btn1<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            checkbox<span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        btn2<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            checkbox<span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//反选</span>
        btn3<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token operator">!</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//反选情况2:当反选按钮实现4个全选时,更新上面box状态</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    num<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//if(num === items.length){</span>
                <span class="token comment">//    checkbox.checked = true;</span>
                <span class="token comment">//}else{</span>
                <span class="token comment">//    checkbox.checked = false;</span>
                <span class="token comment">//} 使用如下语句代替if else判断</span>
                checkbox<span class="token punctuation">.</span>checked <span class="token operator">=</span> num<span class="token operator">==</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
                
            <span class="token punctuation">}</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code># 爱好选择器 使用封装函数实现第三部分全选更新上面box

btn3<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token operator">!</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">checkAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">checkAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">checkAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked<span class="token punctuation">)</span><span class="token punctuation">{</span>
            num<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        checkAll<span class="token punctuation">.</span>checked <span class="token operator">=</span> num<span class="token operator">==</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="节点"><a href="#节点" class="header-anchor">#</a> 节点</h2> <p><strong>什么是节点</strong></p> <p>文档树所有包含的东西都可以称作节点</p> <p><strong>节点的分类</strong></p> <p>元素 文本 属性 注释</p> <p>元素内的文本形成<strong>文本节点</strong>,被标记为==#text== .一个文本节点只包含一个字符串.它没有子项,并且总是树的叶子.</p> <p>请注意文本节点的特殊字符:</p> <ul><li>换行符 <code>↵</code>（在 JavaScript 中为 <code>\n</code>）</li> <li>空格: <code>␣</code></li></ul> <p>空格和换行符都是完全有效的字符,它们形成文本节点并成为DOM一部分.只有两个顶级排除项:</p> <p>1.==</p><head>==之前的空格和换行符均被忽略.<p></p> <p>2.====之后不能有空格.如果在其后放置东西,会被自动移动到body内,并处于body的最下方,因为HTML规范要求所有内容必须为于body内.</p> <p><strong>注意事项</strong></p> <p>按照DOM规范,表格必须具有==</p><tbody>==. 但HTML文档却忽略了它,浏览器在创建DOM时,自动创建了==<tbody>==.<p></p> <h3 id="查找元素的其他方式"><a href="#查找元素的其他方式" class="header-anchor">#</a> 查找元素的其他方式</h3> <h4 id="节点-2"><a href="#节点-2" class="header-anchor">#</a> 节点:</h4> <p>换行符会被当做文本节点,当文本连续时中间没有元素分割,换行与否都会当做一个节点</p> <h4 id="子节点和子元素"><a href="#子节点和子元素" class="header-anchor">#</a> 子节点和子元素</h4> <h5 id="childnodes-儿子节点"><a href="#childnodes-儿子节点" class="header-anchor">#</a> childNodes(儿子节点)</h5> <p>拿到某个元素子节点:包括元素,文本,注释节点</p> <p>高级浏览器: 元素, 文本(文本,空格,换行), 注释</p> <p>低版本浏览器: 元素, 文本(不包括空格和换行), 注释</p> <p><strong>实例</strong></p> <p>参考下面的案例:</p> <table><thead><tr><th>节点类型</th> <th>nodeName</th> <th>nodeType</th> <th>nodeValue</th></tr></thead> <tbody><tr><td>文本节点</td> <td>#text</td> <td>3</td> <td>文本内容</td></tr> <tr><td>元素节点</td> <td>全大写英文</td> <td>1</td> <td>null</td></tr> <tr><td>注释节点</td> <td>#comment</td> <td>8</td> <td>注释内容</td></tr></tbody></table> <h5 id="children"><a href="#children" class="header-anchor">#</a> children</h5> <p>拿到的是某个元素的子元素节点</p> <p>高级浏览器: 元素</p> <p>低版本浏览器: 元素, 注释</p> <h5 id="两者实例比较"><a href="#两者实例比较" class="header-anchor">#</a> 两者实例比较</h5> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    hahahaha
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>今天中午吃点啥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>大米饭<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>明天我休息了<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--今天挺冷的--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    window.onload = function () {
        var boxNode = document.querySelector('.box');
        console.log(boxNode.childNodes);
        console.log(boxNode.children);

    }


NodeList(10) [text, h2, p, text, span, text, div, text, comment, text]
HTMLCollection(4) [h2, p, span, div]   
</code></pre></div><h4 id="获取元素的子节点和子元素"><a href="#获取元素的子节点和子元素" class="header-anchor">#</a> 获取元素的子节点和子元素</h4> <blockquote><p>封装一个筛选所有子元素节点的方法</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    hahahaha
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>今天中午吃点啥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>大米饭<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>明天我休息了<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--今天挺冷的--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
     <span class="token keyword">function</span> <span class="token function">allchildElementNodes</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//声明一个数组,作为存储所有子元素节点的容器</span>
         <span class="token comment">//遍历当前所有的子节点,通过判断nodeType是否为1 来确定是否加入数组</span>
         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">{</span>
                 arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">allChildElementNodes</span><span class="token punctuation">(</span>boxNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
     
     <span class="token comment">//获取子元素节点 返回所有子元素节点 低版本浏览器会返回元素和注释节点</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>   
    
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div><h3 id="查找元素的其他方式2"><a href="#查找元素的其他方式2" class="header-anchor">#</a> 查找元素的其他方式2</h3> <h4 id="查找子元素"><a href="#查找子元素" class="header-anchor">#</a> 查找子元素</h4> <p>firstChild 第一个子节点</p> <p>firstElementChild 第一个子元素节点  //从父元素的视角进行获取  连标签也会获取</p> <p>lastChild 最后一个子节点</p> <p>lastElementChild 最后一个子元素节点</p> <p>previousSibling 上一个兄弟节点    //从兄弟元素角度进行获取</p> <p>previousElementSibling 上一个兄弟元素节点</p> <p>nextSibling 下一个兄弟节点</p> <p>nextElementSiling 下一个兄弟元素节点</p> <h4 id="查找父元素"><a href="#查找父元素" class="header-anchor">#</a> 查找父元素</h4> <p>parentNode 获取父节点</p> <p>parentElementNode 获取父元素节点</p> <p><strong>总结</strong>  ???</p> <blockquote><p>在获取某个元素的父元素时,以上的parentNode和parentElementNode方法, 得到的结果一样</p> <p>所有获取元素节点的方式 都是高级浏览器生效 低级浏览器不能使用</p> <p>所有获取节点的方式(不分类型的) 都是所有浏览器通用的.</p> <p>父节点必须是元素节点</p></blockquote> <h3 id="封装获取第一个子元素节点的方法"><a href="#封装获取第一个子元素节点的方法" class="header-anchor">#</a> 封装获取第一个子元素节点的方法</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    hahahaha
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>今天中午吃点啥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>大米饭<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>明天我休息了<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--今天挺冷的--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">function</span> <span class="token function">getFirstElementChild</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> node<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> result <span class="token operator">=</span> node<span class="token punctuation">.</span>firstElementChild
                <span class="token keyword">while</span><span class="token punctuation">(</span>result<span class="token operator">!==</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> reuslt<span class="token punctuation">.</span>nodeType<span class="token operator">!==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    result <span class="token operator">=</span> result<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div><h3 id="创建节点3种方式"><a href="#创建节点3种方式" class="header-anchor">#</a> 创建节点3种方式</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//第一种方式</span>
        document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt;文本内容会覆盖页面&lt;/h1&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//第二种方式</span>
        boxNode<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span> <span class="token string">'&lt;h1&gt;文本内容&lt;/h1&gt;'</span><span class="token punctuation">;</span>
        <span class="token comment">//简化版</span>
        boxNode<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token string">'&lt;h1&gt;文本内容&lt;/h1&gt;'</span><span class="token punctuation">;</span>
        
        <span class="token comment">//第三种方式 开发中最常用的 适用于循环结构</span>
        <span class="token comment">//1.创建节点 createElement 传递的参数为:标签名称 这个方法返回的就是创建好的这个标签的dom对象</span>
        <span class="token keyword">var</span> hNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">creatElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.操作这个节点</span>
        hNode<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'文本内容'</span><span class="token punctuation">;</span>
        <span class="token comment">//3.将这个dom对象放入到元素中</span>
        boxNode<span class="token punctuation">.</span><span class="token function">appenChild</span><span class="token punctuation">(</span>hNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="创建元素节点比较"><a href="#创建元素节点比较" class="header-anchor">#</a> 创建元素节点比较</h3> <div class="language-HTML extra-class"><pre class="language-html"><code>createElement 适用于添加可循环的数据

innerHTML  适用于不可循环区域
</code></pre></div><h3 id="创建节点案例"><a href="#创建节点案例" class="header-anchor">#</a> 创建节点案例</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>box<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	windown<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'吃饭'</span><span class="token punctuation">,</span><span class="token string">'睡觉'</span><span class="token punctuation">,</span><span class="token string">'滑雪'</span><span class="token punctuation">,</span><span class="token string">'打鼓'</span><span class="token punctuation">,</span><span class="token string">'桌游'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        str <span class="token operator">=</span> <span class="token string">'&lt;ul&gt;'</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            str <span class="token operator">+=</span> <span class="token string">'&lt;li&gt;'</span><span class="token operator">+</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'&lt;\li&gt;'</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>
        str <span class="token operator">+=</span> <span class="token string">'&lt;\ul&gt;'</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="节点增删改"><a href="#节点增删改" class="header-anchor">#</a> 节点增删改</h3> <blockquote><p>都是父元素调用</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>泰坦泰尼克号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>变形金刚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>钢铁侠<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>蜘蛛侠<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>美国队长<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="appendchild"><a href="#appendchild" class="header-anchor">#</a> appendChild</h4> <p><strong>添加节点</strong> 由父元素调用,传递一个要添加的子元素</p> <div class="language-html extra-class"><pre class="language-html"><code>- appendChild
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">var</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">var</span> liNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       liNode<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'新加的内容'</span><span class="token punctuation">;</span><span class="token comment">//内容不限,可以是标签,属性,文本等</span>
       list<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token string">'liNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div><h4 id="insertbefore"><a href="#insertbefore" class="header-anchor">#</a> insertBefore</h4> <p><strong>插入节点</strong> 由父元素调用,传递两个参数.第一个参数为新增节点,第二个为参照节点.如果参照物为null,则等同于追加元素</p> <div class="language-html extra-class"><pre class="language-html"><code>- 以类名为test元素为参照节点
父元素.insertBeofre(新增节点, 参照节点)

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> testNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> liNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        liNode<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'替换的内容'</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>liNode<span class="token punctuation">,</span> testNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>liNode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最后追加节点</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 

</code></pre></div><h4 id="replacechild"><a href="#replacechild" class="header-anchor">#</a> replaceChild</h4> <p><strong>替换节点</strong> 由父元素调用,传递两个参数.第一个参数是替换的节点,第二个参照节点.replaceChild(替换, 参照)</p> <div class="language-html extra-class"><pre class="language-html"><code>- 替换类名为test的元素

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> testNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> liNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        liNode<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'内容内容内容'</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>liNode<span class="token punctuation">,</span> testNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="removechild"><a href="#removechild" class="header-anchor">#</a> removeChild</h4> <p><strong>删除节点</strong> 由父元素调用,需要填入要删除的子元素</p> <div class="language-html extra-class"><pre class="language-html"><code>- removeChild() 和 remove()
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> testNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>testNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

- 上面的代码可以使用testNode.remove()实现同样效果.但IE里无法使用
</code></pre></div><h4 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h4> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> 能对一个节点进行深度克隆
</code></pre></div><h4 id="案例-input与li"><a href="#案例-input与li" class="header-anchor">#</a> 案例-input与li</h4> <div class="language-HTML extra-class"><pre class="language-html"><code>//1.鼠标移到li标签内容上方,变换背景颜色,包括新增li的.
//2.键盘事件，触发回车之后，把表单的内容动态创建li标签，所有的li标签移入变色

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>utf-8<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>七里香<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>七里香<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>七里香<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//获取键盘输入,判断输入内容</span>
                <span class="token keyword">var</span> inputNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> ulNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> liNodes <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list&gt;li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                inputNode<span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//1.判断是否是回车按键</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>event <span class="token operator">===</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token comment">//2.获取输入内容</span>
                        <span class="token keyword">var</span> content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token comment">//2.1 value是input的属性 赋值操作</span>
                        <span class="token comment">//3.判断输入内容是否为空</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//没考虑到输入前后空格情况</span>
                            <span class="token comment">//4.将内容添加到ul列表中</span>
                            <span class="token keyword">var</span> newLi <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            newLi<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> content<span class="token punctuation">;</span>
                            ulNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token string">'newLi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            
                            <span class="token comment">//z.为新加元素绑定事件</span>
                            newLi<span class="token punctuation">.</span><span class="token function-variable function">onmouseenter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token punctuation">;</span>
                            newLi<span class="token punctuation">.</span><span class="token function-variable function">onmouseenter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'请输入正确信息'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><span class="token comment">//清空输入内容</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//注意此处分号</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>liNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    liNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onmouseenter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token comment">//liNodes[i].style.background = 'pink';</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    liNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onmouseleave</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token comment">//liNodes[i].style.background = '';</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//for循环存在两个问题.</span>
                <span class="token comment">//1.新添加的li标签无法获得背景色,使用console打印只有0,1,2三个数字.必须在新增li标签处添加鼠标移入事件.</span>
                <span class="token comment">//2.使用liNodes[i]+let可以实现效果,但换成var报错.</span>
            <span class="token punctuation">}</span>
        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="高级浏览器"><a href="#高级浏览器" class="header-anchor">#</a> 高级浏览器</h4> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

boxNode<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//绑定1</span>
<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token operator">-</span> <span class="token constant">DOM2</span>事件 是允许给一个事件类型 指定多个回调函数的<span class="token punctuation">,</span>高级浏览器触发的顺序是 从上到下

boxNode<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//绑定2</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>



<span class="token operator">-</span> 解绑
boxNode<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn1<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h4 id="低级浏览器"><a href="#低级浏览器" class="header-anchor">#</a> 低级浏览器</h4> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>attachEvent 第一个参数<span class="token operator">:</span><span class="token function">事件类型</span><span class="token punctuation">(</span>字符串传递<span class="token punctuation">,</span>且带on<span class="token punctuation">)</span> 第二个参数回调函数

boxNode<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> fn2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> 低级浏览器中<span class="token punctuation">,</span>如果一个事件类型<span class="token punctuation">,</span>指定多个回调函数<span class="token punctuation">,</span>触发的顺序由下至上
boxNode<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">-</span> 和高级浏览器相同<span class="token punctuation">,</span> 解绑时一定要保证参数和绑定时完全一致 <span class="token comment">//函數需要放在外面</span>
boxNode<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> fn2<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="dom2事件-兼容性绑定"><a href="#dom2事件-兼容性绑定" class="header-anchor">#</a> DOM2事件&amp;兼容性绑定</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">*</span><span class="token punctuation">{</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.box</span><span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addEvent</span><span class="token punctuation">(</span>boxNode<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;点击&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token comment">//3个参数:1.要绑定的元素 2.要绑定的事件 3.事件的回调函数</span>
        <span class="token keyword">function</span> <span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> eventName<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//写兼容性函数时,需要通过判断一个方法时能使用 写函数访问不写函数调用</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
                node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'高级'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                node<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span>on<span class="token operator">+</span><span class="token string">'eventname'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'低级'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">function</span> <span class="token function">removeEvent</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="定时器"><a href="#定时器" class="header-anchor">#</a> 定时器</h3> <h4 id="settimeout-延迟定时器-单次定时器"><a href="#settimeout-延迟定时器-单次定时器" class="header-anchor">#</a> setTimeout()  延迟定时器/单次定时器</h4> <p>setTimeout() 是属于 window 的方法, 在指定的毫秒数后调用函数或计算表达式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//语法</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span>millisec<span class="token punctuation">,</span>param1<span class="token punctuation">,</span>param2<span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">,</span>milliseconds<span class="token punctuation">,</span>param1<span class="token punctuation">,</span>param2<span class="token punctuation">)</span>

code<span class="token operator">/</span><span class="token keyword">function</span> 必须<span class="token punctuation">.</span>代码串或表达式
millisenonds 可选<span class="token punctuation">.</span>默认为<span class="token number">0</span><span class="token punctuation">,</span>执行或调用code<span class="token operator">/</span><span class="token keyword">function</span>需要等待的时间<span class="token punctuation">,</span>以毫秒计<span class="token punctuation">.</span>
param1<span class="token punctuation">,</span>param2<span class="token operator">...</span> 可选<span class="token punctuation">.</span> 传给执行函数的其他参数（<span class="token constant">IE9</span> 及其更早版本不支持该参数）

<span class="token comment">//返回值</span>
返回一个 <span class="token constant">ID</span>（数字），可以将这个<span class="token constant">ID</span>传递给 <span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 来取消执行

<span class="token comment">//描述</span>
定时器的id的本质就是通过数值去记录定时器的顺序<span class="token punctuation">.</span>如果只有一个定时器<span class="token punctuation">,</span><span class="token function">清除定时器也可以用clearTimeout</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>不建议使用
定时器如果不设置时间或者设置时间为<span class="token number">0</span> <span class="token punctuation">,</span>也是异步操作


<span class="token comment">//清除定时器</span>
要清除定时器<span class="token punctuation">,</span> 使用相应的方法<span class="token punctuation">,</span> 传入要清楚的定时器id<span class="token punctuation">.</span> 定时器id的本质就是通过数值去记录定时器的顺序<span class="token punctuation">.</span>但不要使用这种方式去去除<span class="token punctuation">,</span><span class="token function">而是要使用定时器id的变量</span><span class="token punctuation">(</span>方法赋值一个变量<span class="token punctuation">)</span>
<span class="token keyword">let</span> timer<span class="token operator">=</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//示例</span>

<span class="token number">1.</span> <span class="token number">3</span>秒后弹出<span class="token string">'hello'</span>
<span class="token keyword">let</span> myVar<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">myFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	myVar<span class="token operator">=</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>alertFun<span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">alertFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

</code></pre></div><h4 id="循环定时器"><a href="#循环定时器" class="header-anchor">#</a> 循环定时器</h4> <h5 id="参数"><a href="#参数" class="header-anchor">#</a> 参数:</h5> <ol><li>回调函数</li> <li>间隔时间</li></ol> <h5 id="定时器清除"><a href="#定时器清除" class="header-anchor">#</a> 定时器清除</h5> <p>循环定时器的清除, 我们大多数情况下都是<strong>在循环定时器回调函数的内部</strong>,通过判断进行自动清除的.</p> <h5 id="实例-2"><a href="#实例-2" class="header-anchor">#</a> 实例</h5> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> btnNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//btnNode.onclick = function(){</span>
        <span class="token comment">//    clearInterval(timer);</span>
        <span class="token comment">//};</span>
        <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//timer回调函数返回值 </span>
            num<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="实例-阅读协议"><a href="#实例-阅读协议" class="header-anchor">#</a> 实例/阅读协议</h5> <div class="language-HTML extra-class"><pre class="language-html"><code>- 按钮倒计时

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabled</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请阅读（10）秒<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> iptNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            num<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                iptNode<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 只要遇到属性名和属性值都相同的属性进行if判断,统一转换成布尔值操作</span>
                iptNode<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'关闭'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                iptNode<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;请阅读（&quot;</span><span class="token operator">+</span> num <span class="token operator">+</span><span class="token string">&quot;）秒&quot;</span><span class="token punctuation">;</span>
                
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="元素的大小和滚动"><a href="#元素的大小和滚动" class="header-anchor">#</a> 元素的大小和滚动</h2> <p>JavaScript 中有许多属性可让我们读取有关元素宽度、高度和其他几何特征的信息</p> <h3 id="_0-介绍"><a href="#_0-介绍" class="header-anchor">#</a> 0.介绍</h3> <p>需要获取浏览器滚动条的偏移量. 有的浏览器(Chrome)使用html能够获取到值,body为0. 有的浏览器是使用body获取到值,但html为0. 它俩是一个互斥的状态,有且只有一个能够获取到值,另外一个为0. 所以使用兼容方案,==两个值相加==或者使用 ==或运算==.</p> <p>虽然scroll事件发生在window上,但实际上反映的是页面中相应元素的变化.</p> <h3 id="_1-scrolltop"><a href="#_1-scrolltop" class="header-anchor">#</a> 1.scrollTop</h3> <p>属性 <code>scrollLeft/scrollTop</code> 是元素的隐藏、滚动部分的 width/height.换句话说，<code>scrollTop</code> 就是“已经滚动了多少”</p> <p>在下图中，我们可以看到带有垂直滚动块的 <code>scrollHeight</code> 和 <code>scrollTop</code></p> <p><svg xmlns="http://www.w3.org/2000/svg" width="489" height="542" viewBox="0 0 489 542"><defs><style>@import url(https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic%7CPT+Mono);@font-face{font-family:'PT Mono';font-weight:700;font-style:normal;src:local('PT MonoBold'),url(/font/PTMonoBold.woff2) format('woff2'),url(/font/PTMonoBold.woff) format('woff'),url(/font/PTMonoBold.ttf) format('truetype')}</style></defs><defs><linearGradient id="linearGradient-1" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFF"></stop><stop offset="100%" stop-color="#F1F1F1"></stop></linearGradient><linearGradient id="linearGradient-2" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFF"></stop><stop offset="100%" stop-color="#F1F1F1"></stop></linearGradient></defs><g id="dom" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"><g id="metric-scroll-top.svg"><path fill="#FFF" d="M0 0h489v542H0z"></path><text id="Introduction" fill="#5A4739" font-family="OpenSans-Bold, Open Sans" font-size="16" font-weight="bold"><tspan x="94" y="54">Introduction</tspan> <tspan x="94" y="82" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">This Ecma Standard is based on several </tspan> <tspan x="94" y="101" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">originating technologies, the most well </tspan> <tspan x="94" y="120" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">known being JavaScript (Netscape) and </tspan> <tspan x="94" y="139" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">JScript (Microsoft). The language was </tspan> <tspan x="94" y="158" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">invented by Brendan Eich at Netscape and </tspan> <tspan x="94" y="177" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">first appeared in that company’s Navigator </tspan> <tspan x="94" y="196" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">2.0 browser. It has appeared in all </tspan> <tspan x="94" y="215" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">subsequent browsers from Netscape and </tspan> <tspan x="94" y="234" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">in all browsers from Microsoft starting with </tspan> <tspan x="94" y="253" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">Internet Explorer 3.0.</tspan> <tspan x="94" y="272" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">The development of this Standard started </tspan> <tspan x="94" y="291" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">in November 1996. The first edition of this </tspan> <tspan x="94" y="310" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">Ecma Standard was adopted by the Ecma </tspan> <tspan x="94" y="329" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">General Assembly of June 1997.</tspan> <tspan x="94" y="348" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">That Ecma Standard was submitted to ISO/</tspan> <tspan x="94" y="367" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">IEC JTC 1 for adoption under the fast-track </tspan> <tspan x="94" y="386" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">procedure, and approved as international </tspan> <tspan x="94" y="405" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">standard ISO/IEC 16262, in April 1998. The </tspan> <tspan x="94" y="424" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">Ecma General Assembly of June 1998 </tspan> <tspan x="94" y="443" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">approved the second edition of ECMA-262 </tspan> <tspan x="94" y="462" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">to keep it fully aligned with ISO/IEC 16262. </tspan> <tspan x="94" y="481" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">Changes between the first and the second </tspan> <tspan x="94" y="500" font-family="OpenSans-Regular, Open Sans" font-size="14" font-weight="normal">edition are editorial in nature.</tspan></text><path id="Rectangle-1" fill="#E8C48F" fill-opacity=".88" d="M425 122v290H51V122h374zm-25 25H76v240h324V147z"></path><path id="Rectangle-2" stroke="#E8C48F" stroke-opacity=".8" stroke-width="2" d="M75 22h326v500H75z"></path><text id="scrollTop" fill="#EE6B47" font-family="PTMono-Regular, PT Mono" font-size="12" font-weight="normal" transform="rotate(-90 16.5 84)"><tspan x="-15.9" y="88">scrollTop</tspan></text><path id="Line-43" stroke="#EE6B47" stroke-dasharray="3,6" stroke-linecap="square" stroke-width="2" d="M9.5 147h66.14"></path><path id="Line-42" stroke="#EE6B47" stroke-dasharray="3,6" stroke-linecap="square" stroke-width="2" d="M10.5 21h66.14"></path><path id="Line-39" fill="#EE6B47" fill-rule="nonzero" d="M35 20.5l7 14h-6v97.819l6 .001-7 14-7-14 6-.001V34.5h-6l7-14z"></path><path id="Rectangle-14" fill="#FFF" fill-opacity=".8" d="M88 33h312v89H88z"></path><path id="Rectangle-15" fill="#FFF" fill-opacity=".8" d="M88 411h312v89H88z"></path><text id="scrollHeight:723px" font-family="PTMono-Regular, PT Mono" font-size="14" font-weight="normal" transform="rotate(-90 449 270)"><tspan x="373.4" y="274.5" fill="#EE6B47">scrollHeight:</tspan> <tspan x="482.6" y="274.5" fill="#3B86C4">723px</tspan></text><path id="Line-27" stroke="#EE6B47" stroke-dasharray="3,6" stroke-linecap="square" stroke-width="2" d="M393.5 22h78.14"></path><path id="Line-28" stroke="#EE6B47" stroke-dasharray="3,6" stroke-linecap="square" stroke-width="2" d="M393.5 522h78.14"></path><path id="Line-25" fill="#EE6B47" fill-rule="nonzero" d="M462 24.5l7 14h-6v466h6l-7 14-7-14h6v-466h-6l7-14z"></path><g id="Scrollbar" transform="translate(384 147)"><rect id="Rectangle-19" width="15" height="239" x=".5" y=".5" fill="#F3F2F2" stroke="#E9E9E9" rx="3"></rect><g id="Rectangle-18-+-Triangle-1"><rect id="Rectangle-18" width="15" height="19" x=".5" y=".5" fill="url(#linearGradient-1)" stroke="#CFCFCF" rx="3"></rect><path id="Triangle-1" fill="#92979F" d="M8 7l3.2 6H4.8z"></path></g><g id="Rectangle-18-+-Triangle-2" transform="matrix(1 0 0 -1 0 240)"><rect id="Rectangle-18" width="15" height="19" x=".5" y=".5" fill="url(#linearGradient-1)" stroke="#CFCFCF" rx="3"></rect><path id="Triangle-1" fill="#92979F" d="M8 7l3.2 6H4.8z"></path></g><g id="Rectangle-18-+-Triangle-3-+-Group" transform="translate(0 50)"><g id="Rectangle-18-+-Triangle-3" fill="url(#linearGradient-2)" stroke="#CFCFCF" transform="matrix(1 0 0 -1 0 51)"><rect id="Rectangle-18" width="15" height="50" x=".5" y=".5" rx="3"></rect></g><g id="Group" fill="#D8D8D8" stroke="#979797" transform="translate(4 20)"><path id="Rectangle-22" d="M.5.5h7v1h-7z"></path><path id="Rectangle-23" d="M.5 3.5h7v1h-7z"></path><path id="Rectangle-24" d="M.5 6.5h7v1h-7z"></path><path id="Rectangle-25" d="M.5 9.5h7v1h-7z"></path></g></g></g></g></g></svg></p> <h4 id="_1-1-可修改性"><a href="#_1-1-可修改性" class="header-anchor">#</a> 1.1 可修改性</h4> <p>大多数几何属性是只读的，但是 <code>scrollLeft/scrollTop</code> 是可修改的，并且浏览器会滚动该元素</p> <p>案例地址:</p> <div class="language-html extra-class"><pre class="language-html"><code>https://codepen.io/westover/pen/bGqjbJy
</code></pre></div><iframe height="265" scrolling="no" title="scrollTop可修改" src="https://codepen.io/westover/embed/bGqjbJy?height=265&amp;theme-id=light&amp;default-tab=html,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="allowfullscreen" style="width:100%;">
  See the Pen <a href="https://codepen.io/westover/pen/bGqjbJy">scrollTop可修改</a> by xxl
  (<a href="https://codepen.io/westover">@westover</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <h4 id="_1-2-其他"><a href="#_1-2-其他" class="header-anchor">#</a> 1.2 其他</h4> <p>将scrollTop设置为0或者一个大的值,例如1e9,将会使元素滚动到顶部/底部.</p> <h4 id="_1-3-案例"><a href="#_1-3-案例" class="header-anchor">#</a> 1.3 案例</h4> <p>1.3.1 <code>elem.scrollTop</code> 属性是从顶部滚动出来的部分的大小。如何获得底部滚动的大小（我们称其为 <code>scrollBottom</code>）？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> scrollBottom <span class="token operator">=</span> ele<span class="token punctuation">.</span>srollHeight<span class="token operator">-</span>ele<span class="token punctuation">.</span>scrollTop<span class="token operator">-</span>ele<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
（完全高度）减去（已滚出顶部的高度）减去（可见部分的高度）— 得到的结果就是滚动出来的底部的部分
</code></pre></div><p>1.3.2 求滚动条的宽度</p> <p>对于 Windows，它通常在 <code>12px</code> 和 <code>20px</code> 之间变化。如果浏览器没有为其保留任何空间（滚动条以半透明的形式处于文本上面，也是可能发生的），那么它可能是 <code>0px</code></p> <h4 id="获取滚动条位置"><a href="#获取滚动条位置" class="header-anchor">#</a> 获取滚动条位置</h4> <p><strong>浏览器1:</strong> document.documentElement.scrollTop</p> <p><strong>浏览器2:</strong> document.body.scrollTop</p> <h4 id="设置滚动条位置"><a href="#设置滚动条位置" class="header-anchor">#</a> 设置滚动条位置</h4> <p>设置滚动条位置,其实就是修改HTML和body的scrollTop值.但是情况和获取相同,不同的浏览器需要分别通过html和body来操作.所以兼容设置的方案就是两个都设置,不会有其他影响.</p> <p>一个元素的<strong>scrollTop值</strong>是这个<strong>元素内容</strong>顶部到它的<strong>视口可见内容</strong>的顶部的距离.例如如果设置300(没有单位),元素会向视口位置移动300px的距离. 没有负数.</p> <h4 id="浏览器兼容性设置"><a href="#浏览器兼容性设置" class="header-anchor">#</a> 浏览器兼容性设置</h4> <p>document.documentElement.scrollTop || document.body.scrollTop</p> <p>document.documentElement.scrollTop + document.body.scrollTop</p> <h4 id="实例-3"><a href="#实例-3" class="header-anchor">#</a> 实例</h4> <div class="language-HTML extra-class"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">button</span><span class="token punctuation">{</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> btnNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btnNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


</code></pre></div><h3 id="滚动条动画实例-回顶部"><a href="#滚动条动画实例-回顶部" class="header-anchor">#</a> 滚动条动画实例-回顶部</h3> <h4 id="回到顶部2种方法"><a href="#回到顶部2种方法" class="header-anchor">#</a> 回到顶部2种方法</h4> <p>时间固定 : 路程越远, 则速度越快, 现在最常用</p> <p>速度固定: 路程越远,时间越长.</p> <h4 id="动画时长及帧"><a href="#动画时长及帧" class="header-anchor">#</a> 动画时长及帧</h4> <blockquote><p>使用循环定时器,  在帧时长的单位上移动</p></blockquote> <p>动画总时长,</p> <p>动画帧时长(范围是30-16, 小于16和16效果在肉眼下区别很小)</p> <p>总帧数= 动画总时长 / 帧时长.</p> <p>总偏移(就是当前浏览器的scrollTop)</p> <p>单次偏移 = 总偏移 / 总帧数.</p> <h4 id="实例-4"><a href="#实例-4" class="header-anchor">#</a> 实例</h4> <div class="language-HTML extra-class"><pre class="language-html"><code># 时间固定的前提下,点击按钮,滚动条返回顶部


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">*</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">body</span><span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 2000px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#btn</span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
        <span class="token property">bottom</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">right</span><span class="token punctuation">:</span>50px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>回到顶部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> btnNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> allTime <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span> <span class="token comment">//定义总时长</span>
        <span class="token keyword">var</span> itemTime <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>  <span class="token comment">//定义动画帧时长</span>
        btnNode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//获取总偏移</span>
            <span class="token keyword">var</span> offset <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
            <span class="token comment">//计算单次偏移</span>
            <span class="token keyword">var</span> itemOffset <span class="token operator">=</span> offset <span class="token operator">/</span> <span class="token punctuation">(</span>allTime <span class="token operator">/</span> itemTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//单次偏移=总偏移/(总时长/动画帧时长)</span>
			<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>offset <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                   	<span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span>
                
                offset <span class="token operator">-=</span> itemOffset<span class="token punctuation">;</span> 
                document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> offset<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> itemTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

单次偏移 * 动画帧时长 * 总帧数 = 总偏移

</code></pre></div><h3 id="元素的宽度与位置"><a href="#元素的宽度与位置" class="header-anchor">#</a> 元素的宽度与位置</h3> <div class="language-HTML extra-class"><pre class="language-html"><code>- clientWidth和clientHeight 可以获取初始包含块的宽度和高度,相当于视口但不是视口

clientWidth: 目标元素的宽度
clientWidth = width+paddingleft+paddingright;

clientHeight:目标元素的高度
clientHeight = height+paddingtop+paddingbottom

offsetWidth: 目标元素的宽度(加边框)
offsetWidth = width+paddingleft+paddingright+borderleft+borderright;

offsetHeight: 目标元素的高度(加边框)
offsetHeight = height+paddingtop+paddingbottom+bordertop+borderbotton

相对于包含块的偏移,就和绝对定位一样.不是相对于视口,目前所学的没有直接获取的
offsetLeft:
offsetTop:


clientLeft: 
clientTop:
内容边界到边界的距离,可以理解为border.但并不是border

遇到xy就要想到鼠标对象

</code></pre></div><h3 id="导航跟随"><a href="#导航跟随" class="header-anchor">#</a> 导航跟随</h3> <div class="language-HTML extra-class"><pre class="language-html"><code># 滚动条超过一屏的距离后, 导航漂浮.低于一屏的距离,回到原来的位置
# onscroll BOM事件,用于检测浏览器滚动条是否正在被移动
# 视口高度 获取的固定方式: var H = document.documentElement.clientHeight;

 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
     <span class="token selector">*</span><span class="token punctuation">{</span>
         <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
         <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token selector">body</span><span class="token punctuation">{</span>
         <span class="token property">height</span><span class="token punctuation">:</span> 2000px<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token selector">.box</span><span class="token punctuation">{</span>
         <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
         <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
         <span class="token property">background</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> <span class="token constant">H</span> <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span><span class="token comment">//视口高度</span>
        <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//用于检测浏览器滚动条,是否正在被移动,无论是什么方式</span>
            <span class="token keyword">var</span> scrollT <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token operator">||</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
            <span class="token comment">//兼容获取当前浏览器滚动条的偏移</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>scrollT <span class="token operator">&gt;</span> <span class="token constant">H</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'fixed'</span><span class="token punctuation">;</span><span class="token comment">//当前滚动的距离超过一屏, 导航漂浮</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'static'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="盒子来回移动"><a href="#盒子来回移动" class="header-anchor">#</a> 盒子来回移动</h3> <div class="language-HTML extra-class"><pre class="language-html"><code># 页面上的盒子在浏览器视口宽度范围内来回移动

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">*</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.box</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> startLeft <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            startLeft <span class="token operator">+=</span> step<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>startLeft <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">{</span>
                startLeft <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
                step <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">;</span> 
                <span class="token comment">//这个地方第一次的写法是 startLeft -= step; 是不正确的.这样会造成死循环</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>startLeft <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                startLeft <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                step <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> startLeft<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="拖拽基础"><a href="#拖拽基础" class="header-anchor">#</a> 拖拽基础</h3> <div class="language-HTML extra-class"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">*</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.box</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boxNode<span class="token punctuation">.</span>onmousedown <span class="token operator">=</span> <span class="token function">functio</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//鼠标坐标使用event.clientX的原因? 打印event就是鼠标事件</span>
            <span class="token comment">//获取鼠标开始坐标</span>
            <span class="token keyword">var</span> startX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
            <span class="token keyword">var</span> startY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
            <span class="token comment">//获取元素坐标</span>
            <span class="token keyword">var</span> eleX <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
            <span class="token keyword">var</span> eleY <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            boxNode<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//获取鼠标结束坐标</span>
                <span class="token keyword">var</span> endX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
                <span class="token keyword">var</span> endY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
                <span class="token comment">//获取鼠标移动距离差</span>
                <span class="token keyword">var</span> disX <span class="token operator">=</span> endX <span class="token operator">-</span> startX<span class="token punctuation">;</span>
                <span class="token keyword">var</span> disY <span class="token operator">=</span> endY <span class="token operator">-</span> startY<span class="token punctuation">;</span>
                
                <span class="token comment">//更新目标元素的坐标:原始坐标+移动距离</span>
                boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> eleX <span class="token operator">+</span> disX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> eleY <span class="token operator">+</span> disY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            boxNode<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                boxNode<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//鼠标按键抬起所有动作结束.注销函数.否则点击和移动事件不会结束.</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
       
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="拖拽问题的解决"><a href="#拖拽问题的解决" class="header-anchor">#</a> 拖拽问题的解决</h3> <div class="language-HTML extra-class"><pre class="language-html"><code># 鼠标移动过快,元素跟不上.
鼠标会脱离元素, 因为先移动鼠标,然后获取鼠标坐标,然后经过计算,最终设置元素.这个过程中页面渲染是需要时间的,元素没有第一时间跟随鼠标移动,鼠标就脱离出来了.脱离之后, 鼠标不再事件源身上,代码失效.

# 消除文字图片等内容可以被拖拽的浏览器默认行为
1.dom0级事件 阻止默认行为就是在时间回调函数的结尾添加 return false;
 - 低版本id中,文字的拖拽不算做默认行为范畴,只能通过开启全局捕获的方式进行
 - 开启全局捕获之后,就是将后续所有的事件,都聚焦在这个元素身上.相当于无论点击那里都是在点击这个元素.切记,全局捕获有开启就一定有释放.



<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boxNode<span class="token punctuation">.</span>onmousedown <span class="token operator">=</span> <span class="token function">functio</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//开启全局捕获.因为高版本浏览器不认识这个方法,所以先访问.如果存在则结果为真,再调用.</span>
            boxNode<span class="token punctuation">.</span>setCapture <span class="token operator">&amp;&amp;</span> boxNode<span class="token punctuation">.</span><span class="token function">setCapture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//鼠标坐标使用event.clientX的原因? 打印event就是鼠标事件</span>
            <span class="token comment">//获取鼠标开始坐标</span>
            <span class="token keyword">var</span> event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
            <span class="token keyword">var</span> startX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
            <span class="token keyword">var</span> startY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
            <span class="token comment">//获取元素坐标</span>
            <span class="token keyword">var</span> eleX <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
            <span class="token keyword">var</span> eleY <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
                <span class="token comment">//获取鼠标结束坐标</span>
                <span class="token keyword">var</span> endX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
                <span class="token keyword">var</span> endY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
                <span class="token comment">//获取鼠标移动距离差  </span>
                <span class="token keyword">var</span> disX <span class="token operator">=</span> endX <span class="token operator">-</span> startX<span class="token punctuation">;</span>
                <span class="token keyword">var</span> disY <span class="token operator">=</span> endY <span class="token operator">-</span> startY<span class="token punctuation">;</span>
                
                <span class="token comment">//更新目标元素的坐标:原始坐标+移动距离  这个地方理解起来有困难.前提是鼠标在元素上位置是固定的.画图需要一条辅助线来理解</span>
                boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> eleX <span class="token operator">+</span> disX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> eleY <span class="token operator">+</span> disY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                boxNode<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//鼠标按键抬起所有动作结束.注销函数.否则点击和移动事件不会结束.</span>
                <span class="token comment">//释放全局捕获</span>
                boxNode<span class="token punctuation">.</span>releaseCapture <span class="token operator">&amp;&amp;</span> boxNode<span class="token punctuation">.</span><span class="token function">releaseCapture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//阻止默认行为</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="拖拽边界值测试"><a href="#拖拽边界值测试" class="header-anchor">#</a> 拖拽边界值测试</h3> <h4 id="边界值判断2种逻辑"><a href="#边界值判断2种逻辑" class="header-anchor">#</a> 边界值判断2种逻辑</h4> <p>范围限定类: 大于最大值等于最大值, 小于最小值等于最小值</p> <p>首尾相接类: 大于最大值等于最小值, 小于最小值等于最大值  例如轮播图</p> <div class="language-html extra-class"><pre class="language-html"><code># 让元素在视口范围活动,如果移动到视口边界,则禁止继续向边界外侧移动.
# 为什么不能直接使用鼠标移动后元素的offsetLeft和offsetTop, 再加上这两个值的初始值. 错误. *******

- 因为鼠标移动之后,offsetLeft是设置出来的,是无法获取的.
- 1.offsetLeft 返回元素上边界到它的包含元素的上边界的偏移量,以像素为单位.
- 2.什么叫偏移量, 就是指绝对位置.
- 3.无论鼠标移动元素到哪里, 绝对位置不会变.
- 4.如何获取视觉位置 this.getBoundingClientRect().top


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boxNode<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            boxNode<span class="token punctuation">.</span>setCapture <span class="token operator">&amp;&amp;</span> boxNode<span class="token punctuation">.</span><span class="token function">setCapture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> event <span class="token operator">=</span> event<span class="token operator">||</span>window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
            <span class="token keyword">var</span> startX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
            <span class="token keyword">var</span> startY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
            <span class="token keyword">var</span> eleX <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
            <span class="token keyword">var</span> eleY <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            
            boxNode<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> endX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
                <span class="token keyword">var</span> endY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
                <span class="token keyword">var</span> disX <span class="token operator">=</span> endX <span class="token operator">-</span> startX<span class="token punctuation">;</span>
                <span class="token keyword">var</span> disY <span class="token operator">=</span> endY <span class="token operator">-</span> startY<span class="token punctuation">;</span>
                
                <span class="token keyword">var</span> lastX <span class="token operator">=</span> disX <span class="token operator">+</span> eleX<span class="token punctuation">;</span>
                <span class="token keyword">var</span> lastY <span class="token operator">=</span> disY <span class="token operator">+</span> eleY<span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>lastX <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    lastX <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>lastX <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//实现吸附效果,将最小值改为10.将最大值减去10;</span>
                    lastX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>lastY <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    lastY <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>lastY <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    lastY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> lastX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">+</span> lastY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        	boxNode<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                boxNode<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                boxNode<span class="token punctuation">.</span>releaseCapture <span class="token operator">&amp;&amp;</span> boxNode<span class="token punctuation">.</span><span class="token function">releaseCapture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//释放全局捕获</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//阻止默认行为</span>
        <span class="token punctuation">}</span><span class="token comment">//阻止默认行为和释放全局捕获的位置不一样</span>
        
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="dom案例及功能"><a href="#dom案例及功能" class="header-anchor">#</a> DOM案例及功能</h2> <h3 id="拖拽九宫格碰撞"><a href="#拖拽九宫格碰撞" class="header-anchor">#</a> 拖拽九宫格碰撞</h3> <div class="language-js extra-class"><pre class="language-js"><code>## <span class="token function">浏览器在每个元素上都getBoudingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法 返回一个DOMrect对象<span class="token punctuation">,</span>包含<span class="token number">6</span>个属性<span class="token operator">:</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> height和width<span class="token punctuation">.</span> 这些元素给出了元素在页面中相对于视口的位置<span class="token punctuation">.</span>


<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
    <span class="token operator">*</span><span class="token punctuation">{</span>
        margin<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        padding<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>box<span class="token punctuation">{</span>
        width<span class="token operator">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>
        height<span class="token operator">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>
        background<span class="token operator">:</span> pink<span class="token punctuation">;</span>
        position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
        left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    img<span class="token punctuation">{</span>
        width<span class="token operator">:</span> <span class="token number">150</span>px<span class="token punctuation">;</span>
        height<span class="token operator">:</span> <span class="token number">140</span>px<span class="token punctuation">;</span>
        position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
        left<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>
        top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        bottom<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        margin<span class="token operator">:</span> auto<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'box'</span><span class="token operator">&gt;</span>文本内容<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;1.jpg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>scripot<span class="token operator">&gt;</span>
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">var</span> boxNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">var</span> imgNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	
    	boxNode<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    		<span class="token keyword">var</span> event <span class="token operator">=</span> event<span class="token operator">||</span>window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
            boxNode<span class="token punctuation">.</span>setCapture <span class="token operator">&amp;&amp;</span> boxNode<span class="token punctuation">.</span><span class="token function">setCapture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token keyword">var</span> startX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
    		<span class="token keyword">var</span> startY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
    		<span class="token keyword">var</span> eleX <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
    		<span class="token keyword">var</span> eleY <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            
            
            boxNode<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    		<span class="token keyword">var</span> event <span class="token operator">=</span> event<span class="token operator">||</span>window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
    		<span class="token keyword">var</span> endX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
    		<span class="token keyword">var</span> endY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
    		<span class="token keyword">var</span> disX <span class="token operator">=</span> endX <span class="token operator">-</span> startX<span class="token punctuation">;</span>
    		<span class="token keyword">var</span> disY <span class="token operator">=</span> endY <span class="token operator">-</span>startY<span class="token punctuation">;</span>
    		
    		<span class="token keyword">var</span> lastX <span class="token operator">=</span> eleX <span class="token operator">+</span> disX<span class="token punctuation">;</span>
    		<span class="token keyword">var</span> lastY <span class="token operator">=</span> eleX <span class="token operator">+</span> disY<span class="token punctuation">;</span>
    		
            <span class="token keyword">if</span><span class="token punctuation">(</span>lastX <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">{</span>
                lastX <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>lastX <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                lastX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>lastY <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">{</span>
                lastY <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> boxNode<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>lastY <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                lastY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> lastX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    		boxNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> lastY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            
            <span class="token keyword">var</span> boxNodeL <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> boxNode<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            <span class="token keyword">var</span> imgNodeL <span class="token operator">=</span> imgNode<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            
            <span class="token keyword">var</span> boxNodeT <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> boxNode<span class="token punctuation">.</span>clientTop<span class="token punctuation">;</span>
            <span class="token keyword">var</span> imgNodeT <span class="token operator">=</span> imgNode<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>
            
            <span class="token keyword">var</span> boxNodeR <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
            <span class="token keyword">var</span> imgNodeR <span class="token operator">=</span> imgNode<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">+</span> imgNode<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            
            <span class="token keyword">var</span> boxNodeB <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            <span class="token keyword">var</span> imgNodeB <span class="token operator">=</span> imgNode<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">+</span> imgNode<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            
            <span class="token comment">//将所有不相邻的条件集中,通过或运算,全部写在if中,如果都不满足,则说明一定为真</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>boxNodeL<span class="token operator">&lt;</span>imgNodeL<span class="token operator">||</span>boxNodeT<span class="token operator">&lt;</span>imgNodeT<span class="token operator">||</span>boxNodeR<span class="token operator">&gt;</span>imgNodeR<span class="token operator">||</span>boxNodeB<span class="token operator">&gt;</span>imgNodeB<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//如果有任意一个条件为true, 则原图不变</span>
                imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'1.jpg'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'2.jpg'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    		
    <span class="token punctuation">}</span>
    	boxNode<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            boxNode<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> boxNode<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            boxNode<span class="token punctuation">.</span>releaseCapture <span class="token operator">&amp;&amp;</span> boxNode<span class="token punctuation">.</span><span class="token function">releaseCapture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    
    	
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>scripot<span class="token operator">&gt;</span>
</code></pre></div><h3 id="禁用浏览器滚动条"><a href="#禁用浏览器滚动条" class="header-anchor">#</a> 禁用浏览器滚动条</h3> <p>如果给body或html其中的某个设置overflow属性,都是将overflow属性设置给了document, 作用于整个页面.如果同时给html和body设置overflow属性,则html设置的属性作用于document, body的作用于自身. 背景background同样作用.</p> <p>页面当中,其实一共有两个浏览器的滚动条(document和body), 所以通常写页面时,都会讲html和body共同禁止.</p> <div class="language-HTML extra-class"><pre class="language-html"><code>html, body{
	height:100%;
	overflow:hidden;
}
</code></pre></div><h3 id="自定义滚动条布局-pc"><a href="#自定义滚动条布局-pc" class="header-anchor">#</a> 自定义滚动条布局-PC</h3> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">*</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">html,body</span><span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">overflow</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.wrap</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span>pink<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.scrollWrap</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span>20px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span>deeppink<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span>
        <span class="token property">right</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.scrollIn</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span>yellowgreen<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span>2px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--自定义滚动条结构 滑槽 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>scrollWrap<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 滑块 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>scrollIn<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="自定义滚动条-滑块移动"><a href="#自定义滚动条-滑块移动" class="header-anchor">#</a> 自定义滚动条-滑块移动</h3> <h4 id="自定义滚动条的万能比例"><a href="#自定义滚动条的万能比例" class="header-anchor">#</a> 自定义滚动条的万能比例:</h4> <p>滚动条高度/屏幕的高度 = 屏幕的高度/内容的高度 = 滚动条的滚动距离/内容的滚动距离</p> <p>滚动条高度/滑槽的高度 = 屏幕的高度/内容的高度 = 滚动条的滚动距离/内容的滚动距离 屏幕高度与滑槽高度是相等的</p> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">*</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">html,body</span><span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">overflow</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.wrap</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span>pink<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.scrollWrap</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span>20px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span>deeppink<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span>
        <span class="token property">right</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.scrollIn</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span>yellowgreen<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span>2px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.content</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--内容区--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--自定义滚动条结构     滑槽--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrollWrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--滑块--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrollIn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> scrollIn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.scrollIn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> liNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            liNode<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i<span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>liNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 滑块的高度/屏幕的高度 = 屏幕的高度/内容的高度 = 滚动条的滚动距离/内容的滚动距离</span>
        <span class="token comment">// 比例 = 屏幕的高度 /内容的高度</span>
        <span class="token keyword">var</span> scale <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">/</span> list<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
        <span class="token comment">// 设置滑块高度 屏幕高度*scale</span>
        scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">*</span> scale <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        scrollIn<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//鼠标起始位置</span>
            <span class="token keyword">var</span> startY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
            <span class="token keyword">var</span> eleY <span class="token operator">=</span> scrollIn<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>

            document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> endY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
                <span class="token keyword">var</span> disY <span class="token operator">=</span> endY <span class="token operator">-</span> startY<span class="token punctuation">;</span>

                <span class="token comment">//滑块最终的位置</span>
                <span class="token keyword">var</span> lastY <span class="token operator">=</span> eleY <span class="token operator">+</span> disY<span class="token punctuation">;</span>

                <span class="token comment">//滑块范围限定</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>lastY <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    lastY <span class="token operator">=</span> <span class="token number">0</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>lastY <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    lastY <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token comment">//设置给滑块</span>
                scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> lastY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                <span class="token comment">//让内容区跟随滚动 滑块的滚动距离/scale</span>
                <span class="token keyword">var</span> contentY <span class="token operator">=</span>lastY <span class="token operator">/</span> scale<span class="token punctuation">;</span>
                content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span> contentY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span> <span class="token comment">//注意负值</span>
            <span class="token punctuation">}</span>
            document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="滚轮事件"><a href="#滚轮事件" class="header-anchor">#</a> 滚轮事件</h3> <p>mousewheel 既能使用dom0绑定,也能使用dom2绑定. Chrome/IE支持. 使用event.wheelDelta, 滚动向上输出120. 向下输出-120</p> <p>DOMMouseScroll 只能使用dom2绑定. Firefox支持. 使用event.detail. 滚轮向上输出-3, 向下输出3.</p> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">*</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.box</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//true代表向上, false代表向下</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousewheel'</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//chrome/IE 支持</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMMouseScroll'</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Firefox支持</span>
        <span class="token comment">//虽然绑定事件时,需要根据不同的浏览器绑定不同的事件,不过我们在事件回调函数中处理的逻辑相同.所以,将事件的回调函数单独定义成有名函数,同时指定给两个事件.</span>
        <span class="token comment">//滚轮事件是可以给元素使用的,只是实际应用场景不多.大多数情况下,都是在整个页面当中操作</span>
        
        <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//ie/chrome浏览器  负值向下 正值向上</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//向下</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//向上</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>evnet<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//向下</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//向上</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//通过flag赋值,统一上下方向</span>
            
            <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
                box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> box<span class="token punctuation">.</span>offsetHeight <span class="token operator">-</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> box<span class="token punctuation">.</span>offsetheight <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="阻止浏览器默认行为"><a href="#阻止浏览器默认行为" class="header-anchor">#</a> 阻止浏览器默认行为</h4> <p><code>return false</code>阻止的是dom0所触发的默认行为</p> <p>dom2通过event下面的event.preventDefault()</p> <h3 id="自定义滚动条滚轮控制滑块"><a href="#自定义滚动条滚轮控制滑块" class="header-anchor">#</a> 自定义滚动条滚轮控制滑块</h3> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">*</span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">html,body</span><span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.wrap</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.scrollWrap</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
        <span class="token property">right</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.scrollIn</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token comment">/*height: 100px;*/</span>
        <span class="token property">background</span><span class="token punctuation">:</span> yellowgreen<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span>2px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.content</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>wrap<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>content<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>list<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>scrollWrap<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>scrollIn<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> scrollIn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.scrollIn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//创建内容</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> liNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            liNode<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i<span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>liNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">//公式: 滑块的高度/屏幕的高度 = 屏幕的高度/内容的高度 = 滚动条的滚动距离/内容的滚动距离</span>
        <span class="token keyword">var</span> scale <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">/</span> content<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
        <span class="token comment">//求滑块高度</span>
        scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">*</span> scale <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        
        scrollIn<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//鼠标起始位置</span>
            <span class="token keyword">var</span> startY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
            <span class="token comment">//元素距离包含块元素的距离</span>
            <span class="token keyword">var</span> eleY <span class="token operator">=</span> srcollIn<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            
            document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> endY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
                <span class="token keyword">var</span> disY <span class="token operator">=</span> endY <span class="token operator">-</span> startY<span class="token punctuation">;</span>
                <span class="token comment">//滑块最终的位置</span>
                <span class="token keyword">var</span> lastY <span class="token operator">=</span> disY <span class="token operator">+</span> eleY<span class="token punctuation">;</span>
                
                <span class="token comment">//滑块范围限定</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>lastY <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    lastY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">(</span>lastY <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    lastY <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token comment">//设置滑块滑动的距离</span>
                scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> lastY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                <span class="token comment">//内容的滚动距离 滚动条的滚动距离/scale</span>
                <span class="token keyword">var</span> contentY <span class="token operator">=</span> lastY <span class="token operator">/</span> scale<span class="token punctuation">;</span>
                content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>contentY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">//滚轮相关逻辑</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousewheel'</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMMouseScroll'</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//ie chrome</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> scrollT <span class="token operator">=</span> scrollIn<span class="token punctuation">.</span>offsetTop <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>scrollT <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    scrollT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> scrollT <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>scrollT <span class="token operator">/</span> scale <span class="token operator">+</span><span class="token string">'px'</span><span class="token punctuation">;</span>
                
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> scrollT <span class="token operator">=</span> scrollIn<span class="token punctuation">.</span>offsetTop <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>scrollT <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    scrollT <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> scrollT <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>scrollT <span class="token operator">/</span> scale <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="自定义滚动条优化"><a href="#自定义滚动条优化" class="header-anchor">#</a> 自定义滚动条优化</h3> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousewheel'</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMMouseScroll'</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> scrollT <span class="token operator">=</span> scrollIn<span class="token punctuation">.</span>offsetTop <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>scrollT <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scrollT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> scrollT <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>scrollT <span class="token operator">/</span> scale <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> scrollT <span class="token operator">=</span> scrollIn<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>scrollT <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">{</span>
            scrollT <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span>scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> scrollT <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>scrollT <span class="token operator">/</span> scale <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousewheel'</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMMouseScroll'</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            step <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            step <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            step <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            step <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
        
        <span class="token keyword">if</span><span class="token punctuation">(</span>scrollT <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scrollT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> 
        <span class="token keyword">if</span><span class="token punctuation">(</span>scrollT <span class="token operator">&gt;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">{</span>
            scrollT <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span>scrollIn<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
       
    <span class="token punctuation">}</span>
     <span class="token keyword">var</span> scrollT <span class="token operator">=</span> scrollIn<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
     scrollIn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> scrollT <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
     content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>scrollT <span class="token operator">/</span> scale <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="轮播图"><a href="#轮播图" class="header-anchor">#</a> 轮播图</h3> <h4 id="html部分"><a href="#html部分" class="header-anchor">#</a> HTML部分</h4> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">'</span>utf-8<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>container<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>list<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>img/1.jpg<span class="token punctuation">'</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>img/2.jpg<span class="token punctuation">'</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>img/3.jpg<span class="token punctuation">'</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>img/4.jpg<span class="token punctuation">'</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>img/5.jpg<span class="token punctuation">'</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="javascript部分"><a href="#javascript部分" class="header-anchor">#</a> JavaScript部分</h4> <div class="language-js extra-class"><pre class="language-js"><code>
</code></pre></div><h3 id="页面不能点击-禁用click-input等事件"><a href="#页面不能点击-禁用click-input等事件" class="header-anchor">#</a> 页面不能点击(禁用click,input等事件)</h3> <div class="language-js extra-class"><pre class="language-js"><code>在vue组件中<span class="token punctuation">,</span>想实现所有多有的点击事件实现不能点击的效果<span class="token punctuation">,</span>包括二次封装的vant组件<span class="token punctuation">.</span>

几种方法<span class="token operator">:</span>
<span class="token number">1.</span>如果是根组件模板中<span class="token punctuation">,</span>在根标签之下添加<span class="token operator">&lt;</span>form<span class="token operator">&gt;</span><span class="token operator">&lt;</span>filedset disabled<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>filedset<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span> 但只能对表单内的input标签起作用
<span class="token number">2.</span>使用事件捕获<span class="token operator">:</span>
 document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token number">3.</span>class属性pointer<span class="token operator">-</span>evnets<span class="token operator">:</span>none<span class="token punctuation">;</span> 给父组件添加之后也会影响到子组件<span class="token punctuation">,</span>同时移动端上滑动效果也失效<span class="token punctuation">.</span>

<span class="token number">4.</span>知乎 https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>zhihu<span class="token punctuation">.</span>com<span class="token operator">/</span>question<span class="token operator">/</span><span class="token number">290066361</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token number">2.</span>使用事件捕获

<span class="token operator">&lt;</span>div @input<span class="token punctuation">.</span>capture <span class="token operator">=</span> <span class="token string">'disableAllEvents'</span> @click<span class="token punctuation">.</span>capture <span class="token operator">=</span> <span class="token string">'disableAllEvents'</span><span class="token operator">&gt;</span>
  
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">disableAllEvents</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>readOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">//e.target.disabled = true;</span>
    
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//或者使用事件修饰符 .stop()</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></tbody></tbody></head></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Front-end-notebook/handbook/02_JavaScript基础.html" class="prev">
        JavaScript基础
      </a></span> <span class="next"><a href="/Front-end-notebook/handbook/04_JavaScript-高级.html">
        JavaScript-高级
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Front-end-notebook/assets/js/app.e3585100.js" defer></script><script src="/Front-end-notebook/assets/js/2.85246d92.js" defer></script><script src="/Front-end-notebook/assets/js/10.f1b216f5.js" defer></script>
  </body>
</html>
